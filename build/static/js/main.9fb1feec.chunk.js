(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,a,t){e.exports=t.p+"static/media/default.ef8c193e.jpg"},250:function(e,a,t){e.exports=t.p+"static/media/default.ef8c193e.jpg"},390:function(e,a,t){e.exports=t(787)},399:function(e,a,t){},400:function(e,a,t){},411:function(e,a,t){},743:function(e,a,t){},765:function(e,a,t){},766:function(e,a,t){e.exports=t.p+"static/media/default.aadf2c3d.png"},768:function(e,a,t){e.exports=t.p+"static/media/a.684dfab2.pdf"},786:function(e,a,t){},787:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(25),l=t.n(c),o=t(24),i=t(11),s=t(156),m=t(59),u=function(){return{assesser:{label:"",value:""},assessDate:m.DateTime.local(),assessDate2:m.DateTime.local().plus({day:1}),type:"",sub_type:"",note:"",photo:[],cow:{label:"",value:""},cowshed:{label:"",value:""},lf:"",lb:"",rf:"",rb:"",cowType:"",results:"",add_event:!0}},p=["/","/home","/index"],d="http://139.196.28.170:8811/zh-hans/api/v1/",f=function(){return JSON.parse(localStorage.getItem("User")||"{}")},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("User",JSON.stringify(Object(i.a)({},f(),e)))},E=f(),g=E.token,h=void 0===g?"":g,v=E.loginStatus,y=void 0!==v&&v,O=E.farmCode,x=void 0===O?"":O,j=E.farmName,N=void 0===j?"":j,w=JSON.parse(localStorage.getItem("taskDetail2")||"{}"),k={User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:h,loginStatus:y,farmCode:x,farmName:N},a=arguments.length>1?arguments[1]:void 0,t=a.payload;switch(a.type){case"LOGIN_IN":return b(t),Object(i.a)({},e,t);case"LOGIN_OUT":return b({token:"",loginStatus:!1,farmCode:"",farmName:""}),{token:"",loginStatus:!1,farmCode:"",farmName:""};case"SELECT_FARM":return b(t),Object(i.a)({},e,t);default:return e}},Message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{variant:"error",open:!1,message:""},a=arguments.length>1?arguments[1]:void 0,t=a.payload;switch(a.type){case"SHOW_MESSAGE":return Object(i.a)({},e,{open:!0},t);case"CLOSE_MESSAGE":return Object(i.a)({},e,{open:!1});default:return e}},TaskDetail2:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0,t=a.payload;switch(a.type){case"SAVE_TASK_DETAIL2":var n=Object(i.a)({},e,t);return setTimeout(function(){localStorage.setItem("taskDetail2",JSON.stringify(n))}),n;case"CLEAR_TASK_DETAIL2":return setTimeout(function(){localStorage.removeItem("taskDetail2")}),w;default:return w}}},S=Object(s.b)(Object(i.a)({},k,{reviewDetailStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u(),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SAVE_REVIEW_DETAIL":return Object(i.a)({},e,a.payload);case"CLEAR_STATE":return u();default:return e}}})),_=Object(s.c)(S,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),C=t(900),T=t(376),I=(t(399),t(39)),D=t(95),A=(t(400),t(828)),R=t(830),z=t(831),W=t(832),L=t(833),F=t(834),M=t(835),H=Object(A.a)({layout:{},bottomNav:{position:"fixed",width:"100%",bottom:0,zIndex:10,boxShadow:"0 -1px 5px 0 rgba(58, 59, 59, 0.5)"}}),U=function(e){return function(a){var t=H(),n=a.location,c=a.history,l=p.includes(n.pathname)?p[1]:n.pathname;return r.a.createElement("div",{className:t.layout},r.a.createElement(e,a),r.a.createElement(R.a,{value:l,onChange:function(e,a){return c.push(a)},className:t.bottomNav,showLabels:!0},r.a.createElement(z.a,{label:"\u4e3b\u9875",value:p[1],icon:r.a.createElement(W.a,null)}),r.a.createElement(z.a,{label:"\u4efb\u52a1",value:"/tasks",icon:r.a.createElement(L.a,null)}),r.a.createElement(z.a,{label:"\u62a5\u8868",value:"/reports",icon:r.a.createElement(F.a,null)}),r.a.createElement(z.a,{label:"\u67e5\u725b",value:"/search",icon:r.a.createElement(M.a,null)})))}},B=t(45),P=t(8),J=t(843),K=t(844),V=t(907),q=t(845),G=t(846),X=t(380),Y=t(849),Z=t(850),$=t(847),Q=t(848),ee=t(377),ae=t(836),te=t(906),ne=t(838),re=t(842),ce=t(92),le=function(e){return{type:"SHOW_MESSAGE",payload:Object(i.a)({},e)}},oe=function(){return{type:"CLOSE_MESSAGE"}},ie=t(837),se=function(e){return _.dispatch(le({variant:"error",message:e}))},me=function(){_.dispatch({type:"LOGIN_OUT"}),window.location.href="".concat(window.location.origin,"/#/login")},ue=function(e){if(console.log("handleError",e),e&&e.status)switch(e.status){case 400:se("\u53c2\u6570\u9519\u8bef");break;case 401:se("\u672a\u6388\u6743\uff0c\u8bf7\u767b\u5f55"),me();break;case 402:se("\u767b\u5f55\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55"),me();break;case 403:se("\u62d2\u7edd\u8bbf\u95ee");break;case 404:se("\u8bf7\u6c42\u5730\u5740\u51fa\u9519");break;case 408:se("\u8bf7\u6c42\u8d85\u65f6");break;case 500:se("\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef");break;case 501:se("\u670d\u52a1\u672a\u5b9e\u73b0");break;case 502:se("\u7f51\u5173\u9519\u8bef");break;case 503:se("\u670d\u52a1\u4e0d\u53ef\u7528");break;case 504:se("\u7f51\u5173\u8d85\u65f6");break;case 505:se("HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301")}return Object(ae.a)(e)},pe=function(e,a,t){var n,r="".concat(d).concat(e,"/"),c={},l=f(),o=l.token,i=l.farmCode,s=_.getState();if(t&&t.useToken){if(!o||!s.User.token)return me(),ie.a;c.AUTHORIZATION="JWT ".concat(o)}if(t&&t.useFarmCode){if(!i)return me(),ie.a;r="".concat(d).concat(i,"/").concat(e,"/")}if(t&&t.useId&&t.useFarmCode){var m=a.id;r="".concat(d).concat(i,"/").concat(e,"/").concat(m,"/"),delete a.id}return t&&t.overrideUrl&&(r=t.overrideUrl(d,e,{farmCode:i})),n="".concat(r,"?").concat(Object.entries(a).map(function(e){return e.join("=")}).join("&")),te.a.get(n,c).pipe(Object(ne.a)(ue))},de=function(e,a,t){var n={},r="".concat(d).concat(e,"/"),c=f(),l=c.token,o=c.farmCode,i=_.getState();if(t&&t.useToken){if(!l||!i.User.token)return me(),ie.a;n.AUTHORIZATION="JWT ".concat(l)}if(t&&t.useFarmCode){if(!o)return me(),ie.a;r="".concat(d).concat(o,"/").concat(e,"/")}if(t&&t.useId){var s=a.id;r="".concat(d).concat(o,"/").concat(e,"/").concat(s,"/"),delete a.id}return t&&t.overrideUrl&&(r=t.overrideUrl(d,e,{farmCode:o})),t&&t.useJSON&&(n["content-type"]="application/json"),t&&t.overrideHeaders&&(n=t.overrideHeaders(n)),te.a.post(r,a,n).pipe(Object(ne.a)(ue))},fe=function(e,a,t){var n={},r="".concat(d).concat(e,"/"),c=f(),l=c.token,o=c.farmCode,i=_.getState();if(t&&t.useToken){if(!l||!i.User.token)return me(),ie.a;n.AUTHORIZATION="JWT ".concat(l)}if(t&&t.useFarmCode){if(!o)return me(),ie.a;r="".concat(d).concat(o,"/").concat(e,"/")}if(t&&t.useId){var s=a.id;r="".concat(d).concat(o,"/").concat(e,"/").concat(s,"/"),delete a.id}return t&&t.overrideUrl&&(r=t.overrideUrl(d,e,{farmCode:o})),t&&t.useJSON&&(n["content-type"]="application/json"),t&&t.overrideHeaders&&(n=t.overrideHeaders(n)),te.a.put(r,a,n).pipe(Object(ne.a)(ue))},be=function(e){return de("imagesupload",e,{useFarmCode:!0,useToken:!0})},Ee=function(e){return de("filesupload",e,{useFarmCode:!0,useToken:!0})},ge=function(e){return pe("cows",e,{useFarmCode:!0,useToken:!0})},he=function(e){return de("assessteats",e,{useToken:!0,useFarmCode:!0,useJSON:!0})},ve=function(e){return de("assesslocomotions",e,{useToken:!0,useFarmCode:!0,useJSON:!0})},ye=function(e){return de("assessbcss",e,{useToken:!0,useFarmCode:!0,useJSON:!0})},Oe=function(e){return de("assessfaecess",e,{useToken:!0,useFarmCode:!0,useJSON:!0})},xe=t(789),je=Object(xe.a)({loginTitle:{fontSize:"24px",marginTop:"15vh"},loginSubTitle:{fontSize:"16px",color:"#ccc"},formContainer:{width:"85%",margin:"0 auto"},codeBtn:{minWidth:"84px",marginBottom:2},textField:{marginTop:"30px"},register:{marginTop:"20px",fontSize:"12px"}}),Ne=t(839),we=t(840),ke=t(841),Se=function(e){return r.a.createElement(Ne.a,{onClick:function(){return e.onClick&&e.onClick()},className:e.className,fullWidth:!0,size:"medium",variant:"contained",color:"primary","aria-label":"Full width outlined button group"},r.a.createElement(we.a,null,e.loading?[r.a.createElement(ke.a,{size:18,color:"secondary",style:{marginRight:"10px"},key:"0"}),e.loadingTxt||"\u6b63\u5728\u64cd\u4f5c\u4e2d..."]:e.btnText))},_e=t(199),Ce=t.n(_e),Te=t(158);function Ie(){var e=Object(o.c)();return function(a){e(le(a))}}var De={username:{validator:function(e,a){return a?!!/^1[34578]\d{9}$/.test(a)||new Error("\u624b\u673a\u53f7\u683c\u5f0f\u6709\u8bef"):new Error("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")}},password:{required:!0,type:"string",message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}},Ae=new Te.a(De),Re=function(e){var a=Object(o.d)(function(e){return e.User.loginStatus}),t=Object(o.c)(),c=Ie(),l=Object(n.useState)({username:"13482545420",password:"123456"}),s=Object(P.a)(l,2),m=s[0],u=s[1],p=je(),d=Object(n.useState)(!1),f=Object(P.a)(d,2),b=f[0],E=f[1],g=Object(n.useState)(!1),h=Object(P.a)(g,2),v=h[0],y=h[1],O=function(e){return t(function(e){return{type:"LOGIN_IN",payload:Object(i.a)({},e)}}(e))},x=function(e){return function(a){u(Object(i.a)({},m,Object(B.a)({},e,a.target.value)))}},j=function(e){return de("aladinauth",{code:e},{useToken:!1})};return r.a.createElement(J.a,null,a?r.a.createElement(D.a,{to:"/home"}):null,r.a.createElement("h1",{className:"".concat(p.loginTitle," text-center")},"\u767b\u5f55UniDairy\u7267\u573a"),r.a.createElement("h4",{className:"".concat(p.loginSubTitle,"  text-center")},"\u6b22\u8fce\u60a8\u4f7f\u7528\u7267\u8054\u7267\u901a\u7267\u573a\u5e73\u53f0"),r.a.createElement("div",{className:p.formContainer},r.a.createElement(K.a,{fullWidth:!0,className:p.textField},r.a.createElement(V.a,{htmlFor:"adornment-mobile"},"\u624b\u673a\u53f7"),r.a.createElement(q.a,{id:"adornment-mobile",value:m.username,onChange:x("username")})),r.a.createElement(K.a,{fullWidth:!0,className:p.textField},r.a.createElement(V.a,{htmlFor:"adornment-password"},"\u5bc6\u7801"),r.a.createElement(q.a,{id:"adornment-password",type:v?"text":"password",value:m.password,onChange:x("password"),endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(X.a,{"aria-label":"toggle password visibility",onClick:function(){return y(!v)},onMouseDown:function(e){return e.preventDefault()}},v?r.a.createElement($.a,{color:"primary"}):null,v?null:r.a.createElement(Q.a,null)))})),r.a.createElement(Se,{className:p.textField,loading:b,loadingTxt:"\u767b\u5f55\u4e2d",onClick:function(){E(!0);var a=Object(ee.a)(Ae.validate(m,function(){})).pipe(Object(ne.a)(function(e){var a=e.errors.map(function(e){return e.message})[0];return c({variant:"warning",message:a}),Object(ae.a)(e)}),Object(re.a)(function(){return Object(te.a)({url:"http://118.178.178.8:8088/mobile/login/",method:"post",body:Ce.a.stringify({username:m.username,password:m.password,client_id:"611753",redirect_uri:"http://aladdin.cas.cx",response_type:"code",scope:"openid profile email phone address ",state:""})}).pipe(Object(ce.a)(function(e){return e.response}))}),Object(re.a)(function(e){return j(e.code).pipe(Object(ce.a)(function(e){return e.response}))}),Object(ne.a)(function(e){return E(!1),Object(ae.a)(e)})).subscribe(function(n){O({token:n.token,loginStatus:!0}),a.unsubscribe(),t({type:"CLOSE_MESSAGE"}),e.history.push("/selectRanch")},function(e){console.log("error",e),a.unsubscribe()})},btnText:"\u767b\u5f55"})),r.a.createElement(Y.a,{container:!0,className:p.register},r.a.createElement(Y.a,{item:!0,xs:2}),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement("span",null,"\u6211\u8fd8\u6ca1\u6709\u8d26\u53f7")),r.a.createElement(Y.a,{item:!0,xs:4},r.a.createElement(Z.a,{component:I.b,to:"/register"}," \u6211\u8981\u6ce8\u518c "))))},ze=Object(xe.a)({loginTitle:{fontSize:"24px",marginTop:"10vh"},formContainer:{width:"85%",margin:"0 auto"},codeBtn:{minWidth:"84px"},textField:{marginTop:"12px"},register:{marginTop:"20px",fontSize:"12px"},registerbtn:{marginTop:25},registerSuccess:{width:"85%",margin:"15vh auto 0",color:"#999",textAlign:"center",fontSize:"14px"},padding0:{padding:0}}),We=t(851),Le=t(852),Fe={phone_number:{validator:function(e,a){return a?!!/^1[34578]\d{9}$/.test(a)||new Error("\u624b\u673a\u53f7\u683c\u5f0f\u6709\u8bef"):new Error("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")}}},Me=Object(i.a)({},Fe,{verify_code:{required:!0,type:"string",message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},password:{required:!0,type:"string",message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},confirm_password:function(e,a,t,n){return a?a===n.password||new Error("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"):new Error("\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801")},company_name:{required:!0,type:"string",message:"\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0"}}),He=new Te.a(Me),Ue=new Te.a(Fe),Be=function(e){var a=ze(),t=Object(n.useState)({phone_number:"",password:"",confirm_password:"",company_name:"",verify_code:""}),c=Object(P.a)(t,2),l=c[0],o=c[1],s=Object(n.useState)(!1),m=Object(P.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)(!1),f=Object(P.a)(d,2),b=f[0],E=f[1],g=Object(n.useState)(30),h=Object(P.a)(g,2),v=h[0],y=h[1],O=Object(n.useState)("\u83b7\u53d6\u9a8c\u8bc1\u7801"),x=Object(P.a)(O,2),j=x[0],N=x[1],w=Object(n.useState)(!1),k=Object(P.a)(w,2),S=k[0],_=k[1],C=Object(n.useState)(!1),T=Object(P.a)(C,2),D=T[0],A=T[1],R=Object(n.useState)(!1),z=Object(P.a)(R,2),W=z[0],L=z[1],F=Ie(),M=function(e){return function(a){o(Object(i.a)({},l,Object(B.a)({},e,a.target.value)))}};return Object(n.useEffect)(function(){var e;return b?(N("".concat(v,"s")),e=setInterval(function(){clearInterval(e),0!==v?y(function(e){return e-1}):(E(!1),y(30))},1e3)):N("\u83b7\u53d6\u9a8c\u8bc1\u7801"),function(){return clearInterval(e)}},[b,v]),r.a.createElement(J.a,null,r.a.createElement("h1",{className:"".concat(a.loginTitle," text-center")},"\u7267\u8054\u7267\u901a\u7267\u4e1a\u901a\u7528\u5e73\u53f0"),u?r.a.createElement("div",{className:a.registerSuccess},r.a.createElement("h3",null,"\u6b22\u8fce\u4f7f\u7528\uff0c\u6709\u4efb\u4f55\u95ee\u9898\u8bf7\u81f4\u7535\uff1a"),r.a.createElement("h3",null,"18621812625"),r.a.createElement(Ne.a,{className:a.textField,fullWidth:!0,size:"medium",variant:"contained",color:"primary","aria-label":"Full width outlined button group",onClick:function(){return e.history.push("/login")}},r.a.createElement(we.a,null,"\u7ee7\u7eed"))):r.a.createElement("div",{className:a.formContainer},r.a.createElement(K.a,{fullWidth:!0,className:a.textField},r.a.createElement(V.a,{htmlFor:"adornment-phone_number"},"\u624b\u673a\u53f7"),r.a.createElement(q.a,{id:"adornment-phone_number",value:l.phone_number,onChange:M("phone_number")})),r.a.createElement(K.a,{fullWidth:!0,className:a.textField},r.a.createElement(V.a,{htmlFor:"adornment-verify_code"},"\u9a8c\u8bc1\u7801"),r.a.createElement(q.a,{id:"adornment-verify_code",value:l.verify_code,onChange:M("verify_code"),endAdornment:r.a.createElement(we.a,{variant:"text",className:a.codeBtn,size:"small",color:"primary",disabled:b,onClick:function(){var e;E(!0);var a={method:"get",url:"http://118.178.178.8:8088/accounts/check_phone_code/".concat(l.phone_number,"/"),crossDomain:!0,withCredentials:!0};e=Object(ee.a)(Ue.validate({phone_number:l.phone_number},function(){})).pipe(Object(ne.a)(function(e){var a=e.errors[0].message;return F({variant:"warning",message:a}),E(!1),ie.a}),Object(re.a)(function(){return Object(te.a)(a).pipe(Object(We.a)(function(e){return console.log("data",e)}))})).subscribe(function(){e.unsubscribe(),F({variant:"success",message:"\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff01"})},function(a){console.log("error",a),e.unsubscribe(),E(!1),F({variant:"error",message:a})})}},j)})),r.a.createElement(K.a,{fullWidth:!0,className:a.textField},r.a.createElement(V.a,{htmlFor:"adornment-password"},"\u5bc6\u7801"),r.a.createElement(q.a,{id:"adornment-password",type:D?"text":"password",value:l.password,onChange:M("password"),endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(X.a,{"aria-label":"toggle password visibility",onClick:function(){return A(!D)},onMouseDown:function(e){return e.preventDefault()}},D?r.a.createElement($.a,{color:"primary"}):null,D?null:r.a.createElement(Q.a,null)))})),r.a.createElement(K.a,{fullWidth:!0,className:a.textField},r.a.createElement(V.a,{htmlFor:"adornment-confirm_password"},"\u786e\u8ba4\u5bc6\u7801"),r.a.createElement(q.a,{id:"adornment-confirm_password",type:W?"text":"password",value:l.confirm_password,onChange:M("confirm_password"),endAdornment:r.a.createElement(G.a,{position:"end"},r.a.createElement(X.a,{"aria-label":"toggle confirm_password visibility",onClick:function(){return L(!W)},onMouseDown:function(e){return e.preventDefault()}},W?r.a.createElement($.a,{color:"primary"}):null,W?null:r.a.createElement(Q.a,null)))})),r.a.createElement(K.a,{fullWidth:!0,className:a.textField},r.a.createElement(V.a,{htmlFor:"adornment-company_name"},"\u8bf7\u8f93\u5165\u4f01\u4e1a\u540d\u79f0"),r.a.createElement(q.a,{id:"adornment-company_name",value:l.company_name,onChange:M("company_name")})),r.a.createElement(Se,{className:a.registerbtn,loading:S,loadingTxt:"\u6ce8\u518c\u4e2d",onClick:function(){_(!0);var e={method:"post",url:"http://118.178.178.8:8088/mobile/reg/",crossDomain:!0,withCredentials:!0,body:Ce.a.stringify(l)},a=Object(ee.a)(He.validate(l,function(){})).pipe(Object(ne.a)(function(e){var a=e.errors[0].message;return F({variant:"warning",message:a}),_(!1),ie.a}),Object(re.a)(function(){return Object(te.a)(e).pipe(Object(Le.a)("response"))})).subscribe(function(e){_(!1),a.unsubscribe(),e.success?(F({variant:"success",message:"\u6ce8\u518c\u6210\u529f!"}),p(!0)):F({variant:"error",message:e.error_msg})},function(e){a.unsubscribe(),_(!1),F({variant:"error",message:e})})},btnText:"\u6ce8\u518c"}),r.a.createElement(Y.a,{container:!0,className:a.register},r.a.createElement(Y.a,{item:!0,xs:1}),r.a.createElement(Y.a,{item:!0,xs:7},r.a.createElement("span",null,"\u5df2\u7ecf\u6709\u8d26\u6237")),r.a.createElement(Y.a,{item:!0,xs:4,className:"text-center"},r.a.createElement(Z.a,{component:I.b,to:"/login"},"\u767b\u5f55")))))},Pe=t(201),Je=t.n(Pe),Ke=t(161),Ve=t.n(Ke),qe=t(160),Ge=t.n(qe),Xe=t(159),Ye=t.n(Xe),Ze=t(366),$e=t.n(Ze),Qe=t(365),ea=t.n(Qe),aa=t(200),ta=t.n(aa),na=t(854),ra=t(908),ca=t(855),la=t(905),oa=t(902),ia=t(256),sa=t(791),ma=t(364),ua=t.n(ma),pa=t(853),da=Object(xe.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",backgroundColor:"#fff"},input:{marginLeft:8,flex:1},iconButton:{padding:5}}),fa=function(e){var a=da(),t=Object(n.useState)(""),c=Object(P.a)(t,2),l=c[0],o=c[1],i=Object(n.useRef)(null),s=e.searchOnValueIsEmpty,m=e.searchMethod,u=Object(n.useCallback)(function(){(s||l)&&m&&m(l)},[s,l,m]);return Object(n.useEffect)(function(){var e=i.current,a=Object(pa.a)(e,"search").pipe(Object(ce.a)(function(e){return e.target.value})).subscribe(function(e){console.log("value",e),(s||e)&&m&&m(e)});return function(){return a.unsubscribe()}},[i,s,m]),r.a.createElement(ia.a,{className:a.root},r.a.createElement(sa.a,{className:a.input,placeholder:e.placeholder,inputProps:{"aria-label":"\u641c\u7d22UniDairy\u7267\u573a"},inputRef:i,value:l,onChange:function(e){return o(e.target.value)},type:"search"}),e.loading?r.a.createElement(X.a,{className:a.iconButton,"aria-label":"Search",style:{height:"34px"}},r.a.createElement(ke.a,{size:21,color:"primary"})):r.a.createElement(X.a,{className:a.iconButton,"aria-label":"Search",style:{height:"34px"},onClick:u},r.a.createElement(ua.a,{color:l?"primary":"disabled"})))},ba=Object(xe.a)({container:{width:"85%",margin:"15vh auto 0"},title:{fontSize:"20px"},textField:{marginTop:"40px"},ranchList:{paddingLeft:10,marginTop:10}}),Ea=(t(411),function(e){var a=ba(),t=Object(o.c)(),c=Object(n.useState)({page:1,page_size:1e3,search:""}),l=Object(P.a)(c,2),s=l[0],m=l[1],u=r.a.useState(!1),p=Object(P.a)(u,2),d=p[0],f=p[1],b=Object(n.useState)(!0),E=Object(P.a)(b,2),g=E[0],h=E[1],v=Object(n.useState)({farmCode:"",farmName:""}),y=Object(P.a)(v,2),O=y[0],x=y[1],j=Object(n.useState)(""),N=Object(P.a)(j,2),w=N[0],k=N[1],S=Object(n.useState)([]),_=Object(P.a)(S,2),C=_[0],T=_[1],I=function(e){return t(function(e){return{type:"SELECT_FARM",payload:Object(i.a)({},e)}}(e))};return Object(n.useEffect)(function(){var e=function(e){return pe("farms",e,{useToken:!0})}(s).pipe(Object(ce.a)(function(e){var a=e.response;return(void 0===a?{}:a).results||[]})).subscribe(function(e){console.log("data",e),e.length&&(T(e),x({farmCode:e[0].farm_code,farmName:e[0].farm_name}))},function(e){console.log("error",e)});return function(){e.unsubscribe()}},[s]),r.a.createElement("div",{className:"select-ranch-wrapper"},r.a.createElement("div",{className:"select-ranch-container"},r.a.createElement(Y.a,{container:!0,alignItems:"center",justify:"space-between"},r.a.createElement(Y.a,{item:!0,xs:8},r.a.createElement("h1",{className:a.title},"\u767b\u9646\u7267\u8054\u7267\u901a\u7267\u573a")),r.a.createElement(Y.a,{item:!0,xs:4,className:"text-right"},r.a.createElement(na.a,{checked:g,color:"primary",onChange:function(e){h(e.target.checked)}}))),g?[r.a.createElement(fa,{searchMethod:function(e){return m(Object(i.a)({},s,{search:e}))},searchOnValueIsEmpty:!0,key:"0"}),r.a.createElement(K.a,{component:"fieldset",className:a.ranchList,key:"1"},r.a.createElement(ra.a,{"aria-label":"position",name:"position",value:O.farmCode,onChange:function(e){var a=ta()(ea()($e()("farm_code",e.target.value)),Ye()(Ge.a,Ve()(""),Je()("farm_name")))(C);x({farmCode:e.target.value,farmName:a})}},C.map(function(e){return r.a.createElement(ca.a,{key:e.farm_code,value:e.farm_code,control:r.a.createElement(la.a,{color:"primary"}),label:e.farm_name,labelPlacement:"end"})})),C.length?null:r.a.createElement("h6",{className:"text-center"},"\u65e0\u53ef\u7528\u7267\u573a"))]:r.a.createElement(oa.a,{error:d,className:a.textField,placeholder:"\u5f55\u5165\u60a8\u7684\u7267\u573a\u540d\u79f0,\u5982XXX\u7267\u573a",fullWidth:!0,value:w,onChange:function(e){k(e.target.value)},helperText:d?"\u8bf7\u5f55\u5165\u60a8\u7684\u7267\u573a\u540d\u79f0":""}),r.a.createElement(Ne.a,{className:a.textField,fullWidth:!0,size:"medium",onClick:function(){if((!g||O.farmCode)&&(g||w)){var a="0";if(g)a="1",I(O);else if(f(!w),!w)return;e.history.push("/home?isALD=".concat(a)),sessionStorage.setItem("isALD",a)}},variant:"contained",color:"primary","aria-label":"Full width outlined button group",disabled:!C.length},r.a.createElement(we.a,null,"\u786e\u5b9a"))))}),ga=t(133),ha=t.n(ga),va=t(378),ya=t(911),Oa=t(857),xa=t(858),ja=t(859),Na=t(860),wa=Object(xe.a)(function(e){return{UniDairy:{height:"20vh",backgroundColor:e.palette.primary.main,color:"#fff",paddingTop:20,width:"100%",top:0,"& h4":{marginTop:0,marginBottom:0},position:"fixed"},textWhite:{color:"white"},menuItem:{width:80}}}),ka=function(e){var a=wa(),t=Object(o.c)(),n=Object(o.d)(function(e){return e.User}).farmName,c=r.a.useState(null),l=Object(P.a)(c,2),i=l[0],s=l[1],m=Boolean(i),u=[{label:"\u5207\u6362\u7267\u573a",component:r.a.createElement(Oa.a,{color:"primary"}),cb:function(){e.history.push("/selectRanch")}},{label:"\u6211\u7684",component:r.a.createElement(xa.a,{color:"primary"}),cb:function(){e.history.push("/user")}},{label:"\u9000\u51fa",component:r.a.createElement(ja.a,{color:"primary"}),cb:function(){t({type:"LOGIN_OUT"}),e.history.push("/login")}}];function p(){s(null)}return r.a.createElement(J.a,{className:a.UniDairy},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:8},r.a.createElement("h4",null,"UniDairy"),r.a.createElement("h4",null,"\u8fde\u63a5\u7267\u573a\u4e00\u5207\u4fe1\u606f"),r.a.createElement("h4",null,n)),r.a.createElement(Y.a,{item:!0,xs:4,className:"text-right"},r.a.createElement(X.a,{"aria-label":"user",className:a.textWhite,onClick:function(e){s(e.currentTarget)}},r.a.createElement(Na.a,null))),r.a.createElement(va.a,{id:"long-menu",anchorEl:i,keepMounted:!0,open:m,onClose:p,PaperProps:{style:{maxHeight:216}}},u.map(function(e){return r.a.createElement(ya.a,{key:e.label,onClick:function(){return a=e.cb,p(),void a();var a}},e.component," ",e.label)}))))},Sa=Object(xe.a)({homeContainer:{height:"100vh",overflowY:"auto",background:"#fff"},homeContent:{marginTop:96,paddingTop:30,paddingBottom:20,zIndex:5,position:"relative",background:"#fff",textAlign:"center",borderTopLeftRadius:"45px 45px",borderTopRightRadius:"45px 45px"},homeContentIcon:{},searchContainer:{width:"85%",margin:"0 auto"}}),_a=function(e){var a=Sa(),t=Object(o.c)(),c=Object(n.useState)(!1),l=Object(P.a)(c,2),i=l[0],s=l[1];return r.a.createElement(J.a,{className:a.homeContent},r.a.createElement("div",{className:a.searchContainer},r.a.createElement(fa,{placeholder:"\u641c\u7d22\u725b\u53ea",searchMethod:function(a){if(console.log("eartag",a),a){var n={page:1,page_size:10,eartag:a};s(!0);var r=ge(n).pipe(Object(ce.a)(function(e){return e.response})).subscribe(function(a){if(console.log("data",a),r.unsubscribe(),s(!1),1===a.count){var n=a.results[0],c=n.id,l=n.eartag;e.history.push("/cowDetail/".concat(c,"?eartag=").concat(l))}else t({type:"SHOW_MESSAGE",payload:{open:!0,message:"\u672a\u641c\u5230\u8be5\u725b\u53f7\u7684\u725b\u53ea!",variant:"warning"}})},function(e){s(!0)})}else t({type:"SHOW_MESSAGE",payload:{open:!0,message:"\u8bf7\u8f93\u5165\u725b\u53f7",variant:"warning"}})},loading:i,searchOnValueIsEmpty:!1})),r.a.createElement(Y.a,{justify:"center",container:!0},"1"===e.isALD?r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Z.a,{component:I.b,to:"/manageList/ald"},r.a.createElement("div",{className:"home-entrance-wrapper"},r.a.createElement(L.a,{className:"fs-36-it"}),r.a.createElement("div",null,"\u7267\u8054\u7267\u901a\u8bc4\u4f30")))):r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Z.a,{component:I.b,to:"/manageList/society"},r.a.createElement("div",{className:"home-entrance-wrapper"},r.a.createElement(L.a,{className:"fs-36-it"}),r.a.createElement("div",null,"\u793e\u4f1a\u7267\u573a\u8bc4\u4f30")))),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Z.a,{component:I.b,to:"/tasks"},r.a.createElement("div",{className:"home-entrance-wrapper"},r.a.createElement(L.a,{className:"fs-36-it"}),r.a.createElement("div",null,"\u4efb\u52a1\u6e05\u5355")))),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Z.a,{component:I.b,to:"/sceneReport"},r.a.createElement("div",{className:"home-entrance-wrapper"},r.a.createElement(L.a,{className:"fs-36-it"}),r.a.createElement("div",null,"\u73b0\u573a\u62a5\u544a")))),r.a.createElement(Y.a,{item:!0,xs:6},r.a.createElement(Z.a,{component:I.b,to:"/sceneReport"},r.a.createElement("div",{className:"home-entrance-wrapper"},r.a.createElement(L.a,{className:"fs-36-it"}),r.a.createElement("div",null,"\u5206\u6790\u62a5\u544a"))))))},Ca=t(901),Ta=t(138),Ia=t.n(Ta),Da=t(861),Aa=function(e){return r.a.createElement(Ca.a,{border:1,borderRadius:"borderRadius",borderColor:"#ccc",flex:"0 0 85%",margin:"0 10px"},e.children)},Ra=Object(xe.a)({chartTitle:{fontSize:"1rem",color:"#111",paddingLeft:"15px"},chartContainer:{color:"#999",padding:"0 0 70px"}}),za={title:{text:"7\u5929\u4ea7\u91cf\u53d8\u5316",textStyle:{fontSize:14},top:5},trigger:"axis",axisPointer:{type:"shadow"},legend:{data:[{name:"\u65e9\u6f6e",icon:"circle"},{name:"\u4e2d\u6f6e",icon:"circle"},{name:"\u665a\u6f6e",icon:"circle"}],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"]}],yAxis:[{type:"value"}],series:[{name:"\u65e9\u6f6e",type:"bar",stack:"\u5e7f\u544a",data:[120,132,101,134,90,230,210]},{name:"\u4e2d\u6f6e",type:"bar",stack:"\u5e7f\u544a",data:[220,182,191,234,290,330,310]},{name:"\u665a\u6f6e",type:"bar",stack:"\u5e7f\u544a",data:[150,232,201,154,190,330,410]}]},Wa=function(){var e=Ra();return r.a.createElement(Ca.a,{className:e.chartContainer,borderTop:1,borderColor:"#ccc"},r.a.createElement(Y.a,{container:!0,alignItems:"center",className:e.chartTitle},r.a.createElement(Y.a,{item:!0,xs:!0},"\u9884\u8b66\u62a5\u8868"),r.a.createElement(Y.a,{item:!0,xs:2,className:"text-right"},r.a.createElement(Z.a,{component:I.b,to:"/reports"},r.a.createElement(X.a,null,r.a.createElement(Da.a,null))))),r.a.createElement(Ca.a,{display:"flex",flexWrap:"nowrap",overflow:"scroll"},r.a.createElement(Aa,null,r.a.createElement(Ia.a,{option:za,style:{height:"40vh"}})),r.a.createElement(Aa,null,r.a.createElement(Ia.a,{option:za,style:{height:"40vh"}}))))},La=(t(743),Object(xe.a)({homeContainer:{background:"#fff"}})),Fa=function(e){var a=La(),t=Object(o.d)(function(e){return e.User.loginStatus}),n=ha.a.parse(e.location.search,!0).query,c=String(n.isALD||sessionStorage.getItem("isALD")||"0");return r.a.createElement("div",{className:a.homeContainer},t?null:r.a.createElement(D.a,{to:"/login"}),r.a.createElement(ka,e),r.a.createElement(_a,Object.assign({isALD:c},e)),r.a.createElement(Wa,null))},Ma=t(865),Ha=t(254),Ua=t.n(Ha),Ba=t(367),Pa=t.n(Ba),Ja=t(3),Ka=t(131),Va=t(862),qa=Object(xe.a)(function(e){return{root:{backgroundColor:e.palette.primary.main,height:48,fontSize:"1rem",textAlign:"center",color:e.palette.primary.contrastText,position:"fixed",fontWeight:"bolder",top:0,left:0,right:0,zIndex:10},icon:{color:"#fff"},input:{marginLeft:8,flex:1,color:"#fff"},iconButton:{padding:10,color:"#fff"},inputBox:{color:"#fff"}}}),Ga=Object(D.f)(function(e){var a=qa(),t=Object(n.useState)(""),c=Object(P.a)(t,2),l=c[0],o=c[1],i=Object(n.useRef)(null),s=Object(n.useCallback)(function(){return e.getSearchValue&&e.getSearchValue(l)},[e,l]);return Object(n.useEffect)(function(){var a=i.current,t=null;return t=a&&Object(pa.a)(a,"search").pipe(Object(ce.a)(function(e){return e.target.value})).subscribe(function(a){console.log("value",a),e.getSearchValue&&e.getSearchValue(a)}),function(){return t&&t.unsubscribe()}},[i,s,e]),r.a.createElement(ia.a,{className:a.root,square:!0},r.a.createElement(Y.a,{container:!0,alignItems:"center"},r.a.createElement(Y.a,{item:!0,xs:2},r.a.createElement(X.a,{onClick:function(){return e.beforeRouteLeave&&e.beforeRouteLeave(),void e.history.goBack()}},r.a.createElement(Va.a,{className:a.icon}))),e.useSearch?r.a.createElement(Y.a,{item:!0,xs:"auto",className:a.inputBox},r.a.createElement(sa.a,{autoFocus:e.autofocus,type:"search",inputRef:i,value:l,onChange:function(e){return o(e.target.value)},className:a.input,placeholder:e.searchPlaceholder,inputProps:{"aria-label":e.searchPlaceholder}}),e.searchLoading?r.a.createElement(X.a,{className:a.iconButton,"aria-label":"Search"},r.a.createElement(ke.a,{size:20,color:"secondary"})):r.a.createElement(X.a,{className:a.iconButton,"aria-label":"Search",onClick:s},r.a.createElement(M.a,{color:"secondary"}))):[r.a.createElement(Y.a,{item:!0,xs:!0,key:"0"},e.title),r.a.createElement(Y.a,{item:!0,xs:2,key:"1"},e.endAdorment)]))}),Xa=t(903),Ya=t(863),Za=Object(A.a)(function(e){return{root:{position:"fixed",top:48,left:0,right:0,zIndex:10,background:e.palette.primary.main,color:e.palette.primary.contrastText,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.12)"}}}),$a=function(e){var a=Za(),t=e.value,n=e.onChange,c=e.tabList;return r.a.createElement(Ca.a,{className:a.root},r.a.createElement(Xa.a,{value:t,onChange:n,indicatorColor:"secondary",textColor:"secondary",centered:!0,variant:"fullWidth"},c.map(function(e){return r.a.createElement(Ya.a,{key:e,label:e})})))},Qa=t(209);function et(e){var a=e.children,t=e.value,n=e.index,c=Object(Qa.a)(e,["children","value","index"]);return r.a.createElement(Ca.a,Object.assign({hidden:t!==n},c),a)}var at=Object(A.a)(function(e){return{img:{display:"block",maxWidth:"100%",maxHeight:"100%"},detailBtn:{padding:0,float:"right",margin:"5px 14px 0 0"},paper:{padding:"5px 0",marginTop:10}}}),tt=t(212),nt=t(864);function rt(e){var a=at(),n=Object(o.c)(),c=e.photo,l=e.run_date,i=e.todotask_name,s=e.tasker_name,m=e.content,u=e.attachment,p=e.location,d=e.onClick;return r.a.createElement(ia.a,{className:Object(Ja.a)(a.paper,"minHeight100"),onClick:d},r.a.createElement(Ca.a,{position:"relative"},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:2,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Ca.a,{paddingX:"5px"},r.a.createElement("img",{className:a.img,alt:"complex",src:c||t(250)}))),r.a.createElement(Y.a,{item:!0,xs:10,container:!0},r.a.createElement(Y.a,{item:!0,xs:"auto",container:!0,direction:"column"},r.a.createElement(Y.a,{item:!0,xs:!0,style:{paddingRight:5}},r.a.createElement(tt.a,{gutterBottom:!0,variant:"subtitle1"},l),r.a.createElement(tt.a,{variant:"subtitle2",gutterBottom:!0},r.a.createElement(Ca.a,{fontSize:"12px"},"\u4efb\u52a1\u540d\u79f0\uff1a",i),r.a.createElement(Ca.a,{fontSize:"12px"},"\u8d23\u4efb\u4eba\uff1a",s),r.a.createElement(Ca.a,{fontSize:"12px"},"\u5730\u70b9\u63cf\u8ff0\uff1a",p),r.a.createElement(Ca.a,{fontSize:"12px",className:"line-clamp-2"},"\u4efb\u52a1\u63cf\u8ff0\uff1a",m)))))),r.a.createElement(Ca.a,{position:"absolute",right:"0%",top:"10%"},u?r.a.createElement("a",{href:u,download:!0},r.a.createElement(X.a,null,r.a.createElement(nt.a,{color:"primary"}))):r.a.createElement(X.a,{onClick:function(){return n({type:"SHOW_MESSAGE",payload:{open:!0,variant:"warning",message:"\u65e0\u53ef\u7528\u9644\u4ef6\u4e0b\u8f7d"}})}},r.a.createElement(nt.a,{color:"primary"})))))}var ct=Object(A.a)(function(e){return{img:{display:"block",maxWidth:"100%",maxHeight:"100%"},detailBtn:{padding:0},paper:{padding:"5px 0",marginTop:10}}});function lt(e){var a=ct(),n=e.photo,c=e.workflow_type_name,l=e.drafttype,o=e.event_date,i=e.activity_done_day,s=e.done_count,m=e.totalcount,u=e.onClick;return r.a.createElement(ia.a,{className:a.paper,onClick:u},r.a.createElement(Ca.a,{position:"relative"},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:2,container:!0,justify:"center",alignItems:"center"},r.a.createElement(Ca.a,{paddingX:"5px"},r.a.createElement("img",{className:a.img,alt:"complex",src:n||t(250)}))),r.a.createElement(Y.a,{item:!0,xs:10,container:!0},r.a.createElement(Y.a,{item:!0,xs:"auto",container:!0,direction:"column"},r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement(tt.a,{gutterBottom:!0,variant:"subtitle1"},c),r.a.createElement(tt.a,{variant:"subtitle2",gutterBottom:!0},r.a.createElement(Ca.a,{fontSize:"12px"},"\u6d3e\u5de5\u5355\u7c7b\u578b\uff1a",l),r.a.createElement(Ca.a,{fontSize:"12px"},"\u4efb\u52a1\u65e5\u671f\uff1a",o),r.a.createElement(Ca.a,{fontSize:"12px"},"\u5b8c\u6210\u671f\u9650\uff1a",i),r.a.createElement(Ca.a,{fontSize:"12px"},"\u5df2\u5b8c\u6210\uff1a",s," / \u603b\u6570\uff1a",m))))))))}var ot=Object(A.a)(function(e){return{pageContainer:{padding:"100px 0 70px",minHeight:"100vh",boxSizing:"border-box"},minHeight100:{minHeight:"100vh",boxSizing:"border-box"},content:{height:"100vh",boxSizing:"border-box",padding:"100px 0 70px",overflowY:"auto"},img:{display:"block",maxWidth:"100%",maxHeight:"100%"},detailBtn:{padding:0},paper:{padding:"5px 0",marginTop:10},circularProgressba:{width:50},circularProgress:{marginRight:10}}});function it(e){var a=e.loading,t=e.loadMore,n=e.hasMore;return a?r.a.createElement(Ca.a,{display:"flex",justifyContent:"center",alignItems:"center",className:"text-center",marginTop:"20px",fontSize:"12px"},r.a.createElement(ke.a,{size:15,style:{marginRight:10}}),"\u6b63\u5728\u52a0\u8f7d\u4e2d..."):r.a.createElement(Ca.a,{className:"text-center",marginTop:"20px",onClick:function(){return t()},fontSize:"12px"},n?"\u70b9\u51fb\u52a0\u8f7d\u66f4\u591a":"\u6ca1\u6709\u66f4\u591a\u4e86")}var st={0:!0,1:!0,2:!0,3:!0},mt={0:1,1:1,2:1,3:1},ut=["\u7e41\u6b96","\u4fdd\u5065","\u8425\u517b","\u4efb\u52a1"],pt=function(e){var a=ot(),t=Object(Ka.a)(),c=Object(n.useState)({0:[],1:[],2:[],3:[]}),l=Object(P.a)(c,2),s=l[0],m=l[1],u=Object(n.useState)({0:1,1:1,2:1,3:1}),p=Object(P.a)(u,2),d=p[0],f=p[1],b=Object(n.useState)({0:"init",1:"init",2:"init",3:"init"}),E=Object(P.a)(b,2),g=E[0],h=E[1],v=Object(n.useState)(!1),y=Object(P.a)(v,2),O=y[0],x=y[1],j=Object(n.useState)(3),N=Object(P.a)(j,2),w=N[0],k=N[1],S=Object(o.c)(),_=function(){return e.history.push("/tasksDetail")},C=function(e){return function(){if(g[e]){var a=d[e]+1;f(Object(i.a)({},d,Object(B.a)({},e,a)))}}};return Object(n.useEffect)(function(){return function(){Object.keys(st).forEach(function(e){return st[e]=!0}),Object.keys(mt).forEach(function(e){return mt[e]=1})}},[]),Object(n.useEffect)(function(){var e,a=function(e){var a=Object(P.a)(e,2),t=a[0],n=a[1],r=Boolean(t&&t.length);r&&(st[w]=!1),mt[w]=d[w],r&&m(function(a){return Object(i.a)({},a,Object(B.a)({},w,a[w].concat(e[0])))}),h(function(e){return Object(i.a)({},e,Object(B.a)({},w,n))})};return(st[w]||mt[w]!==d[w])&&(x(!0),e=3===w?function(){var e;return(e={page:d[3],page_size:5},pe("todotaskruns",e,{useFarmCode:!0,useToken:!0})).pipe(Object(ce.a)(function(e){return e.response}),Object(ce.a)(function(e){return[e.results,e.next]}),Object(ce.a)(function(e){var a=Object(P.a)(e,2),t=a[0],n=a[1];return[t.map(function(e){return Object(i.a)({},e,{toNowDate:Ua()(e.run_date).diff(Ua()(),"day")})}),n]}),Object(Ma.a)(function(){return x(!1)})).subscribe(function(e){console.log("data",e),a(e)})}():function(){var e,t={page:d[w],page_size:5,usage_id:{0:"270",1:"269",2:"268"}[w]};return(e=t,pe("drafts-hz",e,{useToken:!0,useFarmCode:!0})).pipe(Object(ce.a)(function(e){return e.response}),Object(ce.a)(function(e){return Array.isArray(e)?[e,null]:[e.results,e.next]}),Object(Ma.a)(function(){return x(!1)})).subscribe(function(e){console.log("data",e),a(e)})}()),function(){e&&e.unsubscribe()}},[w,d]),r.a.createElement(Ca.a,{className:Object(Ja.a)("bg-gray")},r.a.createElement(Ga,{title:"\u4efb\u52a1\u6e05\u5355"}),r.a.createElement($a,{value:w,onChange:function(e,a){k(a)},tabList:ut}),r.a.createElement(J.a,null,r.a.createElement(Pa.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:w,onChangeIndex:function(e){return k(e)}},ut.map(function(n,c){return r.a.createElement(et,{key:n,value:w,index:c,dir:t.direction},r.a.createElement(Ca.a,{className:a.content},3!==c?s[c].map(function(e,a){return r.a.createElement(lt,Object.assign({key:"tasks-".concat(c,"item-").concat(a)},e,{onClick:_}))}):s[3].map(function(a,t){return r.a.createElement(rt,Object.assign({key:"tasks-3-item-".concat(t),onClick:function(){return function(a){a.done_status_label=a.done_status?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210",S({type:"SAVE_TASK_DETAIL2",payload:a}),e.history.push("/tasksDetail2/".concat(a.id))}(a)}},a))}),r.a.createElement(it,{loading:O,loadMore:C(c),hasMore:Boolean(g[c])})))}))))},dt=t(869),ft=t(870),bt=t(871),Et=t(872),gt=t(873),ht=t(874),vt=(t(764),Object(A.a)(function(e){return{circularProgressba:{width:50},root:{paddingTop:50},tablecell:{padding:"10px 5px"},table:{background:"#fff"},tableHeader:{color:e.palette.primary.main}}})),yt=t(868),Ot=t(790),xt=t(866),jt=t(867),Nt=Object(A.a)(function(e){return{success:{backgroundColor:xt.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:jt.a[700]},root:{transition:"all .5s ease-out",display:"flex",alignItems:"center",justifyContent:"center",height:80,width:80,borderRadius:"50%",transform:"rotate(-20deg)",opacity:.7,color:"#fff",fontSize:12,fontWeight:"bolder",boxShadow:"0 2px 5px #ccc"}}}),wt=function(e){var a=e.done_state_label,t=e.done_state,n=e.className,c=Nt(),l={0:c.warning,1:c.success,2:c.error};return r.a.createElement(Ca.a,{className:Object(Ja.a)(c.root,l[t],n)},a)},kt={activity_done_day:"\u5b8c\u6210\u671f\u9650",activity_task:"\u4efb\u52a1\u540d\u79f0",done_state_label:"\u72b6\u6001",drafttype:"\u6d41\u7a0b\u7c7b\u578b",drug_name:"\u836f\u54c1",eartag:"\u8033\u53f7",event_date:"\u4efb\u52a1\u65e5\u671f",pen_name:"\u725b\u820d",rem:"\u5907\u6ce8",technician:"\u6280\u672f\u5458",workflow_type_name:"\u5de5\u4f5c\u6d41\u7a0b"},St=["activity_task","drafttype","workflow_type_name","eartag","pen_name","drug_name","technician","event_date","activity_done_day","rem"],_t=Object(A.a)(function(e){return{content:{position:"absolute",top:"50%",left:"50%",width:"80%",transform:"translate3d(-50%,-50%, 0)",backgroundColor:"#fff",borderRadius:5,padding:"0 10px 10px",lineHeight:2},label:{color:"#333",marginRight:5},value:{color:e.palette.primary.main},donestate:{top:"50%",left:"50%",position:"absolute",transform:"translate3d(-50%, -50%, 0)"}}});function Ct(e){var a=_t(),t=Object(n.useState)(!1),c=Object(P.a)(t,2),l=c[0],o=c[1],i=e.open,s=e.setOpen,m=e.detail;return Object(n.useEffect)(function(){var e;return e=setTimeout(function(){o(i)},200),function(){return e&&clearTimeout(e)}},[i]),r.a.createElement(yt.a,{in:l},r.a.createElement(Ot.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:i,keepMounted:!0,onClose:function(){return s(!1)}},r.a.createElement(ia.a,{className:a.content},r.a.createElement(Ca.a,{className:"text-center",fontSize:"1.2rem"},"\u660e\u7ec6"),St.map(function(e){return r.a.createElement(Ca.a,{key:e},r.a.createElement(dt.a,{color:"primary"}),r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:"auto"},r.a.createElement("div",{className:Object(Ja.a)(a.label,"text-left")},kt[e],":")),r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement("div",{className:Object(Ja.a)(a.value,"text-right")},m[e]))))}),r.a.createElement(Ca.a,{className:a.donestate},r.a.createElement(wt,{done_state:m.done_state,done_state_label:m.done_state_label})))))}var Tt=function(e){var a=vt(),t=Object(n.useState)(!1),c=Object(P.a)(t,2),l=c[0],o=c[1],i=Object(n.useState)(!1),s=Object(P.a)(i,2),m=s[0],u=s[1],p=r.a.useState(null),d=Object(P.a)(p,2),f=d[0],b=d[1],E=Object(n.useState)([]),g=Object(P.a)(E,2),h=g[0],v=g[1],y=Object(n.useState)(1),O=Object(P.a)(y,2),x=O[0],j=O[1],N=Object(n.useState)({id:"",activity_done_day:"",activity_task:"",done_state:"",done_state_label:"",drafttype:"",drug_name:"",eartag:"",event_date:"",pen_name:"",rem:"",technician:"",workflow_type_name:""}),w=Object(P.a)(N,2),k=w[0],S=w[1],_=function(a,t){var n=h[t];"cow"===a?e.history.push("/cowDetail/".concat(n.id,"?eartag=").concat(n.eartag)):(S(n),o(!0))};return Object(n.useEffect)(function(){u(!0);var e,a=(e={page:x,page_size:5},pe("drafts",e,{useToken:!0,useFarmCode:!0})).pipe(Object(Le.a)("response"),Object(ce.a)(function(e){var a={0:"\u5f85\u5b8c\u5de5",1:"\u5df2\u5b8c\u6210",2:"\u5df2\u8fc7\u671f"};return[e.results.map(function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var c=r[n],l=Object(P.a)(c,2),o=l[0],i=l[1];t[o]=i||"\u6682\u65e0"}return t.done_state_label=a[e.done_state],t.done_state=e.done_state,t}),e.next]}),Object(Ma.a)(function(){return u(!1)})).subscribe(function(e){v(function(a){return a.concat(e[0])}),b(e[1])},function(e){console.log("error",e)});return function(){return a.unsubscribe()}},[x]),r.a.createElement(Ca.a,{paddingBottom:"30px",className:a.root},r.a.createElement(Ga,{title:"\u5b8c\u5de5\u5355\u660e\u7ec6"}),r.a.createElement(dt.a,null),r.a.createElement(ft.a,{className:a.table},r.a.createElement(bt.a,null,r.a.createElement(Et.a,null,r.a.createElement(gt.a,{align:"center",className:Object(Ja.a)(a.tablecell,a.tableHeader)},"\u725b\u53f7"),r.a.createElement(gt.a,{align:"center",className:Object(Ja.a)(a.tablecell,a.tableHeader)},"\u7c7b\u578b"),r.a.createElement(gt.a,{align:"center",className:Object(Ja.a)(a.tablecell,a.tableHeader)},"\u4efb\u52a1\u65e5\u671f"),r.a.createElement(gt.a,{align:"center",className:Object(Ja.a)(a.tablecell,a.tableHeader)},"\u4efb\u52a1\u72b6\u6001"))),r.a.createElement(ht.a,null,h.map(function(e,t){return r.a.createElement(Et.a,{hover:!0,key:"".concat(e.eartag,"-").concat(t)},r.a.createElement(gt.a,{onClick:function(){return _("cow",t)},align:"center",className:a.tablecell},e.eartag),r.a.createElement(gt.a,{onClick:function(){return _("detail",t)},align:"center",className:a.tablecell},e.drafttype),r.a.createElement(gt.a,{onClick:function(){return _("detail",t)},align:"center",className:a.tablecell},e.event_date),r.a.createElement(gt.a,{onClick:function(){return _("detail",t)},align:"center",className:a.tablecell},e.done_state_label))}))),r.a.createElement(it,{loadMore:function(){f&&j(x+1)},loading:m,hasMore:Boolean(f)}),r.a.createElement(Ct,{open:l,detail:k,setOpen:o}))},It={title:{text:"7\u5929\u4ea7\u91cf\u53d8\u5316",textStyle:{fontSize:14},top:5},trigger:"axis",axisPointer:{type:"shadow"},legend:{data:[{name:"\u65e9\u6f6e",icon:"circle"},{name:"\u4e2d\u6f6e",icon:"circle"},{name:"\u665a\u6f6e",icon:"circle"}],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"]}],yAxis:[{type:"value"}],series:[{name:"\u65e9\u6f6e",type:"bar",stack:"\u5e7f\u544a",data:[120,132,101,134,90,230,210]},{name:"\u4e2d\u6f6e",type:"bar",stack:"\u5e7f\u544a",data:[220,182,191,234,290,330,310]},{name:"\u665a\u6f6e",type:"bar",stack:"\u5e7f\u544a",data:[150,232,201,154,190,330,410]}]},Dt=(t(765),Object(xe.a)({root:{margin:"65px 0"}})),At=function(){var e=Dt();return r.a.createElement(J.a,{className:e.root},r.a.createElement(Ga,{title:"\u9884\u8b66\u62a5\u8868"}),r.a.createElement(ia.a,{className:"mt-15"},r.a.createElement(Ia.a,{option:It,style:{height:"40vh"}})),r.a.createElement(ia.a,{className:"mt-15"},r.a.createElement(Ia.a,{option:It,style:{height:"40vh"}})))},Rt=t(875),zt=t(876),Wt=t(877),Lt=t(878),Ft=Object(A.a)({root:{flexGrow:1,position:"fixed",top:48,width:"100vw"},reviewListContainer:{paddingTop:96},media:{height:120}}),Mt={ald:"UniDairy\u7267\u573a",society:"\u793e\u4f1a\u7267\u573a"},Ht=function(e){var a=Ft(),c=Object(n.useState)(0),l=Object(P.a)(c,2),o=l[0],i=l[1],s=[{title:"\u4e73\u5934\u8bc4\u5206",img:t(186),value:0},{title:"\u884c\u8d70\u8bc4\u5206",img:t(186),value:1},{title:"\u4f53\u51b5\u8bc4\u5206",img:t(186),value:2},{title:"\u7caa\u4fbf\u8bc4\u5206",img:t(186),value:3}],m=e.match.params.type;return r.a.createElement("div",null,r.a.createElement(Ga,{title:"".concat(Mt[m],"-\u73b0\u573a\u7ba1\u7406\u6e05\u5355")}),r.a.createElement(ia.a,{className:a.root,square:!0},r.a.createElement(Xa.a,{value:o,onChange:function(a,t){i(t),t&&e.history.push("/viewCowshed/".concat(m))},indicatorColor:"primary",textColor:"primary",centered:!0,variant:"fullWidth"},r.a.createElement(Ya.a,{label:"\u73b0\u573a\u8bc4\u5206"}),r.a.createElement(Ya.a,{label:"\u725b\u820d\u5de1\u68da"}))),r.a.createElement(Y.a,{container:!0,justify:"space-around",className:a.reviewListContainer},s.map(function(t){return r.a.createElement(Y.a,{item:!0,xs:5,key:t.title,className:"mt-15-it"},r.a.createElement(Rt.a,{onClick:function(){return e.history.push("/reviewDetail/".concat(m,"/").concat(t.value))}},r.a.createElement(zt.a,null,r.a.createElement(Wt.a,{className:a.media,image:t.img,title:"Contemplative Reptile"})),r.a.createElement(Lt.a,null,r.a.createElement(we.a,{size:"small",color:"primary"},t.title))))})))},Ut=t(904),Bt=t(881),Pt=t(882),Jt=t(883),Kt=t(85),Vt=t(134),qt=t(369),Gt=t.n(qt),Xt=t(879),Yt=t(880),Zt=t(207);function $t(){return r.a.createElement("span",{style:{color:"red"}},"*")}for(var Qt=Object(xe.a)({flexbox:{display:"flex",alignItems:"center",justifyContent:"center"},img:{display:"block",width:"100%",height:"90px"},deleteIcon:{color:"red"}}),en=function(e){var a=Qt(),t=Object(Zt.b)({accept:"image/*",onDrop:function(a){var t=e.photo.concat(a.map(function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));e.saveReviewDetail({photo:t})}}),n=t.getRootProps,c=t.getInputProps;return r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement(Y.a,{container:!0,alignItems:"center"},e.textAreaRequired?r.a.createElement(Y.a,{item:!0,xs:1},r.a.createElement($t,null)):null,r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement(oa.a,{id:"outlined-textarea",label:e.labelText,multiline:!0,margin:"normal",variant:"outlined",fullWidth:!0,value:e.note,onChange:function(a){return e.saveReviewDetail({note:a.target.value})}})))),r.a.createElement(Y.a,{item:!0,xs:2,className:a.flexbox},r.a.createElement(Ca.a,n({className:"dropzone"}),r.a.createElement("input",c()),r.a.createElement(X.a,null,e.uploadImgRequire&&r.a.createElement($t,null),r.a.createElement(Xt.a,{color:"primary"})))),r.a.createElement(Y.a,{container:!0,spacing:1,alignItems:"center"},e.photo.map(function(t,n){return r.a.createElement(Y.a,{item:!0,xs:4,key:"img-file-".concat(n)},r.a.createElement(Ca.a,{position:"relative"},r.a.createElement("img",{className:a.img,src:t.preview,alt:"img-file-".concat(n)}),r.a.createElement(Ca.a,{position:"absolute",top:"-20px",right:"-20px"},r.a.createElement(X.a,{className:a.deleteIcon,onClick:function(){return function(a){var t=Gt()(a,1,e.photo);e.photo.forEach(function(e){return URL.revokeObjectURL(e.preview)}),e.saveReviewDetail({photo:t})}(n)}},r.a.createElement(Yt.a,null)))))})))},an=Object(xe.a)({root:{marginTop:60,height:"100vh",overflowY:"auto"},InputAdornment:{"& p":{width:65}},inputAdornment:{"& p":{width:45}},flexbox:{display:"flex",alignItems:"center",justifyContent:"center"},btnMargin:{marginTop:0},btnContainer:{fontSize:12,lineHeight:1,color:"#111"},defaultImg:{backgroundColor:"#000",overflow:"auto",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1e3,"& img":{width:"100%",height:"auto"}}}),tn=[{value:"0",label:"\u5e72\u5976\u725b"},{value:"1",label:"\u65b0\u4ea7\u725b"},{value:"2",label:"\u65e9\u671f\u725b"},{value:"3",label:"\u4e2d\u671f\u725b"},{value:"4",label:"\u540e\u671f\u725b"}],nn=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"\u778e\u5976\u5934",value:"0"}],rn=[],cn=1;cn<=5;cn+=.25)rn.push({label:String(cn),value:String(cn)});var ln=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"}],on={ald:"UniDairy\u7267\u573a",society:"\u793e\u4f1a\u7267\u573a"},sn={0:"\u4e73\u5934\u8bc4\u5206",1:"\u884c\u8d70\u8bc4\u5206",2:"\u4f53\u51b5\u8bc4\u5206",3:"\u7caa\u4fbf\u8bc4\u5206"},mn=[{label:"\u5de6\u524d",key:"lf"},{label:"\u5de6\u540e",key:"lb"},{label:"\u53f3\u524d",key:"rf"},{label:"\u53f3\u540e",key:"rb"}],un={0:function(e){var a=e.cow,t=e.lf,n=e.lb,r=e.rf,c=e.rb,l=e.photo;return!a.value||!l.length||!t||!n||!r||!c||!1},1:function(e){var a=e.photo,t=e.cow,n=e.cowType,r=e.results;return!t.value||!a.length||!n||!r||!1},2:function(e){var a=e.results,t=e.cowType,n=e.cow,r=e.photo;return!a||!t||!n.value||!r.length||!1},3:function(e){var a=e.cowshed,t=e.cowType,n=e.results;return!a.value||!t||!n||!1}},pn={0:function(e){return{cow_id:e.cow.value,note:e.note,lf:e.lf,rf:e.rf,rb:e.rb,lb:e.lb,assess_time:e.assessDate,assesser:e.assesser.value,add_event:e.add_event}},1:function(e){return{cow_id:e.cow.value,note:e.note,cow_type:e.cowType,locomotion_score:e.results,assess_time:e.assessDate,assesser:e.assesser.value,add_event:e.add_event}},2:function(e){return{cow_id:e.cow.value,note:e.note,bcs:e.results,assess_time:e.assessDate,assesser:e.assesser.value,add_event:e.add_event,cow_type:e.cowType}},3:function(e){return{cow_type:e.cowType,fs:e.results,pen:e.cowshed.value,note:e.note,assess_time:e.assessDate,assesser:e.assesser.value,add_event:e.add_event}}},dn=function(e){return{type:"SAVE_REVIEW_DETAIL",payload:e}},fn=function(e){return{type:"SAVE_CONTENT",payload:e}},bn=function(e){return{type:"ADD_CONTENT",payload:e}},En=function(e){return{type:"CLEAR_STATE",payload:e}},gn=t(205),hn=t.n(gn),vn=(t(357),Object(o.b)(function(e){return Object(i.a)({},e.reviewDetailStore)},{saveReviewDetail:dn,saveContent:fn,addContent:bn,clearState:En,showMessage:le})(function(e){var a=an(),c=r.a.useState(!1),l=Object(P.a)(c,2),o=l[0],i=l[1],s=r.a.useState(!1),m=Object(P.a)(s,2),u=m[0],p=m[1],d=e.match.params,f=d.ranchType,b=d.reviewType,E=3!==+b,g=2===+b,h="".concat(sn[b],"-\u4e1a\u52a1\u5907\u6ce8"),v=g?rn:ln,y=function(){e.clearState()};var O=function(){if(!o){var a={0:he,1:ve,2:ye,3:Oe};if(un[b](e))return console.log("hasError","\u5b58\u5728\u5fc5\u586b\u9879\u4e3a\u586b\u5199"),void e.showMessage({variant:"warning",open:!0,message:"\u5b58\u5728\u672a\u586b\u5145\u7684\u5fc5\u586b\u9879!"});i(!0);var t=pn[b](e),n=function(){var a=new FormData;return e.photo.forEach(function(e){return a.append("imgs",e)}),be(a).pipe(Object(ce.a)(function(e){return e.response.upload_imgs}))}().pipe(Object(re.a)(function(e){return t.photo=e.toString(),(0,a[b])(JSON.stringify(t))})).subscribe(function(a){console.log("data",a),e.showMessage({variant:"success",open:!0,message:"\u64cd\u4f5c\u6210\u529f"}),y()},function(e){console.error("error",e),i(!1)},function(){i(!1),n.unsubscribe()})}};return Object(n.useEffect)(function(){var e=null;if(u){var a=new Image;a.src=t(766),(e=new hn.a(a,{toolbar:!1,navbar:!1,hidden:function(){e.destroy(),p(function(e){return!e})}})).show()}return function(){return e&&e.destroy()}},[u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ga,{title:"".concat(on[f],"-").concat(sn[b]),beforeRouteLeave:y,endAdorment:0===+b?r.a.createElement(X.a,{onClick:function(){return p(!u)}},r.a.createElement(Bt.a,{color:"secondary"})):null}),r.a.createElement(J.a,{className:a.root},r.a.createElement(K.a,{fullWidth:!0},r.a.createElement(q.a,{value:e.assesser.label,placeholder:"\u70b9\u51fb\u9009\u62e9\u8bc4\u4f30\u4eba\u59d3\u540d",onFocus:function(){return e.history.push("/commonSelectList/user")},startAdornment:r.a.createElement(G.a,{className:a.InputAdornment,position:"start"},"\u8bc4\u4f30\u4eba:")})),r.a.createElement(K.a,{fullWidth:!0,margin:"normal"},r.a.createElement(Kt.b,{utils:Vt.a,locale:"zh-cn"},r.a.createElement(Kt.a,{id:"mui-pickers-date",label:"\u8bc4\u4f30\u65e5\u671f",format:"yyyy-MM-dd",value:e.assessDate,onChange:function(a){return e.saveReviewDetail({assessDate:a})},okLabel:"\u786e\u5b9a",cancelLabel:"\u53d6\u6d88"}))),r.a.createElement(en,{labelText:h,photo:e.photo,note:e.note,saveReviewDetail:e.saveReviewDetail,textAreaRequired:!1,uploadImgRequired:!0}),r.a.createElement(Ca.a,null,r.a.createElement(Ca.a,null,r.a.createElement(K.a,{margin:"dense",fullWidth:!0},r.a.createElement(q.a,{value:E?e.cow.label:e.cowshed.label,onFocus:function(){return e.history.push("/commonSelectList/".concat(E?"cow":"cowshed"))},placeholder:"\u8bf7\u9009\u62e9\u725b".concat(E?"":"\u820d","\u53f7"),startAdornment:r.a.createElement(G.a,{className:a.InputAdornment,position:"start"},r.a.createElement($t,null),"\u725b",E?"\u53f7":"\u820d",":"),endAdornment:3===+b?r.a.createElement(G.a,{position:"end"},"#"):null})),0!==+b?[r.a.createElement(K.a,{margin:"dense",fullWidth:!0,key:"0"},r.a.createElement(oa.a,{select:!0,InputProps:{startAdornment:r.a.createElement(G.a,{className:a.InputAdornment,position:"start"},r.a.createElement("p",null,r.a.createElement($t,null),"\u7c7b\u578b:"))},onChange:function(a){return e.saveReviewDetail({cowType:a.target.value})},value:e.cowType},tn.map(function(e){return r.a.createElement(ya.a,{key:e.value,value:e.value},e.label)}))),r.a.createElement(K.a,{margin:"dense",fullWidth:!0,key:"1"},r.a.createElement(oa.a,{select:!0,InputProps:{startAdornment:r.a.createElement(G.a,{className:a.InputAdornment,position:"start"},r.a.createElement("p",null,r.a.createElement($t,null),"\u7ed3\u679c:"))},onChange:function(a){return e.saveReviewDetail({results:a.target.value})},value:e.results},v.map(function(e){return r.a.createElement(ya.a,{key:e.value,value:e.value},e.label)})))]:r.a.createElement(Y.a,{container:!0,spacing:1},mn.map(function(t){return r.a.createElement(Y.a,{item:!0,xs:6,key:t.key},r.a.createElement(K.a,{margin:"dense",fullWidth:!0},r.a.createElement(oa.a,{select:!0,InputProps:{startAdornment:r.a.createElement(G.a,{className:a.inputAdornment,position:"start"},r.a.createElement("p",null,r.a.createElement($t,null),t.label+":"))},onChange:function(a){return e.saveReviewDetail(Object(B.a)({},t.key,a.target.value))},value:e[t.key]},nn.map(function(e){return r.a.createElement(ya.a,{key:e.value,value:e.value},e.label)}))))})))),r.a.createElement(Ca.a,{className:a.btnContainer},r.a.createElement(ca.a,{className:a.btnContainer,control:r.a.createElement(Ut.a,{checked:e.add_event,onChange:function(a){return e.saveReviewDetail({add_event:a.target.checked})},icon:r.a.createElement(Pt.a,{fontSize:"small"}),checkedIcon:r.a.createElement(Jt.a,{fontSize:"small"}),value:"add_event",color:"primary"}),classes:{label:a.btnContainer},label:"\u662f\u5426\u751f\u6210UniDairy\u4e8b\u4ef6"}),r.a.createElement(Se,{btnText:"\u63d0\u4ea4",onClick:function(){return O()},loading:o,className:a.btnMargin}))))})),yn=Object(xe.a)({root:{marginTop:60,height:"100vh",overflowY:"auto"},inputAdornment:{"& p":{width:75}},inputAdornment2:{"& p":{width:92}},flexbox:{display:"flex",alignItems:"center",justifyContent:"center"},btnMargin:{marginTop:0},btnContainer:{fontSize:12,lineHeight:1,color:"#111",marginTop:20}}),On={ald:"UniDairy\u7267\u573a",society:"\u793e\u4f1a\u7267\u573a"},xn={saveContent:fn,clearState:En,addContent:bn,saveReviewDetail:dn,showMessage:le},jn=Object(o.b)(function(e){return Object(i.a)({},e.reviewDetailStore)},xn)(function(e){var a=e.match.params.ranchType,t=yn(),c=r.a.useState(!1),l=Object(P.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)([]),m=Object(P.a)(s,2),u=m[0],p=m[1],d=Object(n.useState)([]),f=Object(P.a)(d,2),b=f[0],E=f[1],g="".concat(On[a],"-\u725b\u820d\u5de1\u68da"),h=function(){e.clearState()};var v=function(){if(!o){if(!e.type||!e.sub_type||!e.note||!e.photo.length||!e.cowshed.value)return console.log("hasError","\u5b58\u5728\u5fc5\u586b\u9879\u4e3a\u586b\u5199"),void e.showMessage({variant:"warning",open:!0,message:"\u5b58\u5728\u672a\u586b\u5145\u7684\u5fc5\u586b\u9879!"});var a={type:e.type,sub_type:e.sub_type,location:e.cowshed.value,content:e.note,photo:e.photo.toString(),tasker:e.assesser.value,start_time:e.assessDate2,note:e.note};i(!0);var t=function(){var a=new FormData;return e.photo.forEach(function(e){return a.append("imgs",e)}),be(a).pipe(Object(ce.a)(function(e){return e.response.upload_imgs}))}().pipe(Object(re.a)(function(e){return a.photo=e.toString(),t=JSON.stringify(a),de("mtodotasks",t,{useToken:!0,useFarmCode:!0,useJSON:!0});var t})).subscribe(function(a){console.log("data",a),e.showMessage({variant:"success",open:!0,message:"\u64cd\u4f5c\u6210\u529f"}),h()},function(e){console.error("error",e),i(!1)},function(){i(!1),t.unsubscribe()})}};return r.a.useEffect(function(){var a=u.find(function(a){return+a.id===e.type}),t=a&&a.sub_tasktypes;E(t||[])},[u,e.type]),r.a.useEffect(function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pe("todotasktypes",e,{useFarmCode:!1,useToken:!0})}({page:1,page_size:100}).pipe(Object(ce.a)(function(e){return e.response})).subscribe(function(e){console.log("data",e),p(e)},function(e){console.log("err",e)});return function(){return e.unsubscribe()}},[]),r.a.createElement("div",null,r.a.createElement(Ga,{title:g,beforeRouteLeave:h}),r.a.createElement(J.a,{className:t.root},r.a.createElement(K.a,{margin:"dense",fullWidth:!0},r.a.createElement(q.a,{onFocus:function(){return e.history.push("/commonSelectList/user")},value:e.assesser.label,placeholder:"\u70b9\u51fb\u9009\u62e9\u8d23\u4efb\u4eba",startAdornment:r.a.createElement(G.a,{className:t.inputAdornment,position:"start"},"\u8d23\u4efb\u4eba:")})),r.a.createElement(K.a,{margin:"dense",fullWidth:!0},r.a.createElement(oa.a,{select:!0,InputProps:{startAdornment:r.a.createElement(G.a,{className:t.inputAdornment,position:"start"},r.a.createElement("p",null,r.a.createElement($t,null),"\u4efb\u52a1\u7c7b\u578b:"))},onChange:function(a){return e.saveReviewDetail({type:a.target.value})},value:e.type},u.map(function(e){return r.a.createElement(ya.a,{key:e.id,value:e.id},e.task_name_lang)}))),r.a.createElement(K.a,{margin:"dense",fullWidth:!0},r.a.createElement(oa.a,{select:!0,InputProps:{startAdornment:r.a.createElement(G.a,{className:t.inputAdornment2,position:"start"},r.a.createElement("p",null,r.a.createElement($t,null),"\u5b50\u4efb\u52a1\u7c7b\u578b:"))},onChange:function(a){return e.saveReviewDetail({sub_type:a.target.value})},value:e.sub_type},b.map(function(e){return r.a.createElement(ya.a,{key:e.id,value:e.id},e.task_name_lang)}))),r.a.createElement(K.a,{fullWidth:!0,margin:"normal"},r.a.createElement(Kt.b,{utils:Vt.a,locale:"zh-cn"},r.a.createElement(Kt.a,{id:"mui-pickers-date",label:"\u5de1\u68da\u65e5\u671f",format:"yyyy-MM-dd",value:e.assessDate2,onChange:function(a){return e.saveReviewDetail({assessDate2:a})},okLabel:"\u786e\u5b9a",cancelLabel:"\u53d6\u6d88",shouldDisableDate:function(a){return null===a||a.toMillis()<e.assessDate.toMillis()}}))),r.a.createElement(Ca.a,null,r.a.createElement(K.a,{margin:"dense",fullWidth:!0},r.a.createElement(q.a,{value:e.cowshed.label,onFocus:function(){return e.history.push("/commonSelectList/cowshed")},placeholder:"\u70b9\u51fb\u9009\u62e9\u725b\u820d\u53f7",startAdornment:r.a.createElement(G.a,{className:t.inputAdornment,position:"start"},r.a.createElement("p",null,r.a.createElement($t,null),"\u5de1\u89c6\u70b9:")),endAdornment:r.a.createElement(G.a,{position:"end",className:"".concat(t.inputAdornment," text-right")},"#\u728a\u725b\u820e")})),r.a.createElement(en,{labelText:"\u5de1\u89c6\u70b9\uff0c\u95ee\u9898\u63cf\u8ff0",photo:e.photo,note:e.note,saveReviewDetail:e.saveReviewDetail,textAreaRequired:!0,uploadImgRequired:!0})),r.a.createElement(Ca.a,{className:t.btnContainer},r.a.createElement(Se,{btnText:"\u63d0\u4ea4",onClick:function(){return v()},className:t.btnMargin,loading:o}))))}),Nn=Object(xe.a)(function(e){return{root:{paddingTop:48},tableHeader:{color:e.palette.primary.main},circularProgress:{marginRight:10}}}),wn=function(e){var a=Nn(),t=r.a.useState({page:1,page_size:10}),c=Object(P.a)(t,2),l=c[0],o=c[1],s=r.a.useState([]),m=Object(P.a)(s,2),u=m[0],p=m[1],d=r.a.useState(null),f=Object(P.a)(d,2),b=f[0],E=f[1],g=r.a.useState(!1),h=Object(P.a)(g,2),v=h[0],y=h[1],O=Object(Ja.a)(a.tableHeader);return Object(n.useEffect)(function(){y(!0);var e=function(e){return pe("onsiteassessments",e,{useToken:!0,useFarmCode:!0})}(l).pipe(Object(ce.a)(function(e){return e.response}),Object(ce.a)(function(e){return[e.results,e.next]})).subscribe(function(e){console.log("data",e);var a=e[0];p(function(e){return e.concat(a)}),E(e[1]),y(!1)});return function(){return e.unsubscribe()}},[l]),r.a.createElement(Ca.a,{className:a.root},r.a.createElement(Ga,{title:"\u73b0\u573a\u62a5\u544a-\u6e05\u5355"}),r.a.createElement(ia.a,{square:!0},r.a.createElement(ft.a,null,r.a.createElement(bt.a,null,r.a.createElement(Et.a,null,r.a.createElement(gt.a,{className:O,align:"center"},"\u4eba\u5458"),r.a.createElement(gt.a,{className:O,align:"center"},"\u65e5\u671f"),r.a.createElement(gt.a,{className:O,align:"center"},"\u7c7b\u578b"))),r.a.createElement(ht.a,null,u.map(function(a){return r.a.createElement(Et.a,{key:a.id,onClick:function(){return e.history.push("/sceneReportDetail?pdf=".concat(encodeURIComponent(a.pdf)))}},r.a.createElement(gt.a,{align:"center"},a.assessr_name),r.a.createElement(gt.a,{align:"center"},a.assess_date),r.a.createElement(gt.a,{align:"center"},a.assesstype_name))})))),v?r.a.createElement(Ca.a,{display:"flex",justifyContent:"center",alignItems:"center",className:"text-center",marginTop:"20px",fontSize:"12px"},r.a.createElement(ke.a,{size:15,className:a.circularProgress}),"\u6b63\u5728\u52a0\u8f7d\u4e2d..."):r.a.createElement(Ca.a,{className:"text-center",marginTop:"20px",onClick:function(){b&&o(Object(i.a)({},l,{page:l.page+1}))},fontSize:"12px"},b?"\u70b9\u51fb\u52a0\u8f7d\u66f4\u591a":"\u6ca1\u6709\u66f4\u591a\u4e86"))},kn=t(139),Sn=Object(A.a)(function(e){return{root:{paddingTop:50,paddingBottom:70,boxSizing:"border-box",minHeight:"100vh"},paper:{margin:"0 4vw",borderRadius:5,marginTop:15,padding:"10px 0"},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},infoItem:{fontSize:14,lineHeight:1.5,color:"#111"},spanLeft:{width:70},circularProgress:{marginRight:10}}}),_n=function(e){var a=Sn(),n=r.a.useState({page:1,page_size:10,search:"",fromMore:!1}),c=Object(P.a)(n,2),l=c[0],o=c[1],s=r.a.useState([]),m=Object(P.a)(s,2),u=m[0],p=m[1],d=r.a.useState(null),f=Object(P.a)(d,2),b=f[0],E=f[1],g=r.a.useState(!1),h=Object(P.a)(g,2),v=h[0],y=h[1],O=r.a.useState(!1),x=Object(P.a)(O,2),j=x[0],N=x[1];return r.a.useEffect(function(){y(!0);var e=JSON.parse(JSON.stringify(l));delete e.fromMore;var a=ge(e).pipe(Object(ce.a)(function(e){return e.response}),Object(ce.a)(function(e){return[e.results,e.next]})).subscribe(function(e){console.log("data",e);var a=e[0];p(function(e){return l.fromMore?e.concat(a):a}),E(e[1]),y(!1),N(!1)},function(e){y(!1),N(!1)});return function(){return a.unsubscribe()}},[l]),r.a.createElement(Ca.a,{className:Object(Ja.a)(a.root,"bg-gray")},r.a.createElement(Ga,{title:"\u67e5\u627e\u725b\u53ea",useSearch:!0,searchLoading:j,searchPlaceholder:"\u8bf7\u8f93\u5165\u725b\u53f7",getSearchValue:function(e){N(!0),o(Object(i.a)({},l,{fromMore:!1,page:1,search:e}))}}),u.map(function(e,n){return r.a.createElement(Z.a,{component:I.b,to:"/cowDetail/".concat(e.id,"?eartag=").concat(e.eartag),key:"cow-item-".concat(n)},r.a.createElement(ia.a,{className:a.paper,square:!0},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:3,container:!0,justify:"center",alignItems:"center"},r.a.createElement(J.a,null,r.a.createElement(kn.a,null,r.a.createElement("img",{className:a.img,alt:"complex",src:t(250)})))),r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement("div",{className:a.infoItem},r.a.createElement("span",{className:a.spanLeft},"\u725b\u53f7:"),r.a.createElement("span",null,e.eartag)),r.a.createElement("div",{className:a.infoItem},r.a.createElement("span",{className:a.spanLeft},"\u6240\u5c5e\u725b\u820e:"),r.a.createElement("span",null,e.pen_name)),r.a.createElement("div",{className:a.infoItem},r.a.createElement("span",{className:a.spanLeft},"\u7c7b\u578b:"),r.a.createElement("span",null,e.cbrd||"\u6682\u65e0"))))))}),v?r.a.createElement(Ca.a,{display:"flex",justifyContent:"center",alignItems:"center",className:"text-center",marginTop:"20px",fontSize:"12px"},r.a.createElement(ke.a,{size:15,className:a.circularProgress}),"\u6b63\u5728\u52a0\u8f7d\u4e2d..."):r.a.createElement(Ca.a,{className:"text-center",marginTop:"20px",onClick:function(){b&&o(Object(i.a)({},l,{fromMore:!0,page:l.page+1}))},fontSize:"12px"},b?"\u70b9\u51fb\u52a0\u8f7d\u66f4\u591a":"\u6ca1\u6709\u66f4\u591a\u4e86"))},Cn=t(913),Tn=t(884),In=t(885),Dn=t(112),An=t.n(Dn),Rn=function(e){var a=Object(Ka.a)();return r.a.createElement(dt.a,{style:{backgroundColor:a.palette.primary.main}})},zn=Object(A.a)(function(e){return{root:{marginTop:58},heading:{fontSize:14,flexBasis:"45%",flexShrink:0},infoItem:{padding:"5px 0"},lastExpan:{margin:"16px -16px!important"},lastDetail:{overflowX:"scroll",paddingLeft:0},tableCell:{paddingRight:10},tableHeader:{color:e.palette.primary.main}}}),Wn=function(e,a){return{label:e,value:a}},Ln=[Wn("\u725b\u53f7",3080),Wn("\u725b\u533a",11),Wn("\u79bb\u573a\u65e5\u671f",""),Wn("\u751f\u65e5","2013-06-07"),Wn("\u80ce\u6b21",5),Wn("\u80ce\u6b21\u7ec4",3),Wn("\u6bcd\u725b\u53f7",30),Wn("\u7236\u725b\u53f7",380)];function Fn(e,a,t,n,r,c){return{eventname:e,date:a,days:t,count:n,freeze:r,mark:c}}var Mn=[Fn("\u8f6c\u7fa41\u8f6c\u7fa41\u8f6c\u7fa41\u8f6c\u7fa41","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa42","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa43","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa44","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa45","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa46","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa47","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa48","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa49","2019-06-17",1e3,24,"DNJSKWKWN",""),Fn("\u8f6c\u7fa410","2019-06-17",1e3,24,"DNJSKWKWN","")],Hn=function(e){var a=zn(),t=r.a.useState([]),n=Object(P.a)(t,2),c=(n[0],n[1]),l=r.a.useState("panel1"),o=Object(P.a)(l,2),i=o[0],s=o[1],m=ha.a.parse(e.location.search,!0).query,u=e.match.params.id,p=function(e){return function(a,t){s(!!t&&e)}};return r.a.useEffect(function(){var e,a=(e={id:u},pe("cows",e,{useFarmCode:!0,useToken:!0,useId:!0})).pipe(Object(ce.a)(function(e){return e.response})).subscribe(function(e){console.log("data",e),c(e)});return function(){return a.unsubscribe()}},[u]),r.a.createElement(Ca.a,{className:a.root},r.a.createElement(Ga,{title:"\u725b\u53ea\u8be6\u60c5-".concat(m.eartag)}),r.a.createElement(J.a,null,r.a.createElement(Cn.a,{expanded:"panel1"===i,onChange:p("panel1")},r.a.createElement(Tn.a,{expandIcon:r.a.createElement(An.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(tt.a,{className:a.heading},"\u725b\u53ea\u57fa\u672c\u5c5e\u6027")),r.a.createElement(In.a,null,r.a.createElement(Ca.a,{width:"100%"},Ln.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e.label},r.a.createElement(Y.a,{container:!0,className:a.infoItem},r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-left"},e.label),r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-right"},e.value)),t!==Ln.length-1&&r.a.createElement(Rn,null))})))),r.a.createElement(Cn.a,{expanded:"panel2"===i,onChange:p("panel2")},r.a.createElement(Tn.a,{expandIcon:r.a.createElement(An.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(tt.a,{className:a.heading},"\u80ce\u6b21\u57fa\u672c\u4fe1\u606f")),r.a.createElement(In.a,null,r.a.createElement(Ca.a,{width:"100%"},Ln.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e.label},r.a.createElement(Y.a,{container:!0,className:a.infoItem},r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-left"},e.label),r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-right"},e.value)),t!==Ln.length-1&&r.a.createElement(Rn,null))})))),r.a.createElement(Cn.a,{expanded:"panel3"===i,onChange:p("panel3")},r.a.createElement(Tn.a,{expandIcon:r.a.createElement(An.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(tt.a,{className:a.heading},"DHI\u57fa\u672c\u4fe1\u606f")),r.a.createElement(In.a,null,r.a.createElement(Ca.a,{width:"100%"},Ln.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e.label},r.a.createElement(Y.a,{container:!0,className:a.infoItem},r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-left"},e.label),r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-right"},e.value)),t!==Ln.length-1&&r.a.createElement(Rn,null))})))),r.a.createElement(Cn.a,{expanded:"panel4"===i,onChange:p("panel4")},r.a.createElement(Tn.a,{expandIcon:r.a.createElement(An.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(tt.a,{className:a.heading},"\u5976\u5385\u57fa\u672c\u4fe1\u606f")),r.a.createElement(In.a,null,r.a.createElement(Ca.a,{width:"100%"},Ln.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e.label},r.a.createElement(Y.a,{container:!0,className:a.infoItem},r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-left"},e.label),r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-right"},e.value)),t!==Ln.length-1&&r.a.createElement(Rn,null))})))),r.a.createElement(Cn.a,{expanded:"panel5"===i,onChange:p("panel5")},r.a.createElement(Tn.a,{expandIcon:r.a.createElement(An.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(tt.a,{className:a.heading},"\u53d1\u60c5\u76d1\u63a7\u4fe1\u606f")),r.a.createElement(In.a,null,r.a.createElement(Ca.a,{width:"100%"},Ln.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:e.label},r.a.createElement(Y.a,{container:!0,className:a.infoItem},r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-left"},e.label),r.a.createElement(Y.a,{item:!0,xs:!0,className:"text-right"},e.value)),t!==Ln.length-1&&r.a.createElement(Rn,null))})))),r.a.createElement(Cn.a,{expanded:"panel6"===i,onChange:p("panel6"),className:"panel6"===i?a.lastExpan:""},r.a.createElement(Tn.a,{expandIcon:r.a.createElement(An.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(tt.a,{className:a.heading},"\u4e8b\u4ef6\u57fa\u672c\u4fe1\u606f")),r.a.createElement(In.a,{className:"panel6"===i?a.lastDetail:""},r.a.createElement(ft.a,null,r.a.createElement(bt.a,null,r.a.createElement(Et.a,null,r.a.createElement(gt.a,{className:Object(Ja.a)(a.tableCell,a.tableHeader)},"\u4e8b\u4ef6"),r.a.createElement(gt.a,{className:Object(Ja.a)(a.tableCell,a.tableHeader)},"\u65e5\u671f"),r.a.createElement(gt.a,{className:Object(Ja.a)(a.tableCell,a.tableHeader)},"\u5929\u6570"),r.a.createElement(gt.a,{className:Object(Ja.a)(a.tableCell,a.tableHeader)},"\u672c\u80ce\u53d1\u751f\u7684\u6b21\u6570"),r.a.createElement(gt.a,{className:Object(Ja.a)(a.tableCell,a.tableHeader)},"\u51bb\u7cbe"),r.a.createElement(gt.a,{className:Object(Ja.a)(a.tableCell,a.tableHeader)},"\u5907\u6ce8"))),r.a.createElement(ht.a,null,Mn.map(function(e){return r.a.createElement(Et.a,{key:e.eventname},r.a.createElement(gt.a,{className:a.tableCell},r.a.createElement("div",{style:{width:"80px"}},e.eventname)),r.a.createElement(gt.a,{className:a.tableCell},e.date),r.a.createElement(gt.a,{className:a.tableCell},e.days),r.a.createElement(gt.a,{className:a.tableCell},r.a.createElement("div",{style:{width:"50px"}},e.count)),r.a.createElement(gt.a,{className:a.tableCell},e.freeze),r.a.createElement(gt.a,{className:a.tableCell},r.a.createElement("div",{style:{width:"80px"}},e.mark)))})))))))},Un=t(373),Bn=Object(xe.a)({root:{paddingTop:48}}),Pn=function(e){var a=Bn(),c=Object(n.useState)(1),l=Object(P.a)(c,2),o=l[0],i=(l[1],Object(n.useRef)(null)),s=(ha.a.parse(e.location.search,!0).query,Object(Un.a)({file:t(768),page:o,canvasEl:i})),m=Object(P.a)(s,2),u=m[0];m[1];return r.a.createElement(Ca.a,{className:a.root},r.a.createElement(Ga,{title:"\u73b0\u573a\u62a5\u544a-\u660e\u7ec6"}),r.a.createElement(J.a,null,u&&r.a.createElement("span",null,"Loading..."),r.a.createElement("canvas",{ref:i,style:{width:"100vw",height:"auto"}})))},Jn=Object(A.a)(function(e){return{contentContainer:{marginTop:50,height:"80vh",overflow:"auto"},circularProgressba:{width:50},circularProgress:{marginRight:10}}}),Kn={user:"\u9009\u62e9\u8bc4\u4f30\u4eba",cow:"\u9009\u62e9\u725b\u53ea",cowshed:"\u9009\u62e9\u725b\u820d"},Vn={user:function(e){return pe("users",e,{useFarmCode:!0,useToken:!0})},cow:function(e){return pe("cowlites",e,{useFarmCode:!0,useToken:!0})},cowshed:function(e){return pe("pens",e,{useFarmCode:!0,useToken:!0})}},qn=Object(o.b)(function(e,a){return Object(i.a)({},e.reviewDetailStore)},{saveContent:fn,saveReviewDetail:dn})(function(e){var a=Jn(),t=Object(n.useState)(1),c=Object(P.a)(t,2),l=c[0],o=c[1],s=Object(n.useState)(""),m=Object(P.a)(s,2),u=m[0],p=m[1],d=r.a.useState(null),f=Object(P.a)(d,2),b=f[0],E=f[1],g=r.a.useState([]),h=Object(P.a)(g,2),v=h[0],y=h[1],O=r.a.useState(!1),x=Object(P.a)(O,2),j=x[0],N=x[1],w=e.match.params.type,k=Kn[w];return Object(n.useEffect)(function(){N(!0);var e={page:l,page_size:5},a=Vn[w](e).pipe(Object(Le.a)("response"),Object(ce.a)(function(e){return[e.results,e.next]}),Object(ce.a)(function(e){var a=Object(P.a)(e,2),t=a[0],n=a[1];return[t.map(function(e){return Object(i.a)({},e,{id:String(e.id)})}),n]}),Object(ce.a)(function(e){var a=Object(P.a)(e,2),t=a[0],n=a[1],r={user:"username",cow:"eartag",cowshed:"pen_name"};return[t.map(function(e){return Object(i.a)({},e,{label:e[r[w]]})}),n]})).subscribe(function(e){console.log("data",e),y(function(a){return a.concat(e[0])}),E(e[1]),N(!1)},function(e){console.log("error",e)});return function(){return a.unsubscribe()}},[l,w]),r.a.createElement(Ca.a,null,r.a.createElement(Ga,{title:k}),r.a.createElement(J.a,{className:a.contentContainer},r.a.createElement(K.a,{component:"fieldset"},r.a.createElement(ra.a,{"aria-label":"position",name:"position",value:u,onChange:function(e){p(e.target.value)}},v.map(function(e){return r.a.createElement(ca.a,{key:e.id,value:e.id,control:r.a.createElement(la.a,{color:"primary"}),label:e.label,labelPlacement:"end"})}))),j?r.a.createElement(Ca.a,{display:"flex",justifyContent:"center",alignItems:"center",className:"text-center",marginTop:"20px",fontSize:"12px"},r.a.createElement(ke.a,{size:15,className:a.circularProgress}),"\u6b63\u5728\u52a0\u8f7d\u4e2d..."):r.a.createElement(Ca.a,{className:"text-center",marginTop:"20px",onClick:function(){b&&o(l+1)},fontSize:"12px"},b?"\u70b9\u51fb\u52a0\u8f7d\u66f4\u591a":"\u6ca1\u6709\u66f4\u591a\u4e86")),r.a.createElement(Ca.a,{position:"fixed",left:15,right:15,bottom:15},r.a.createElement(Ne.a,{fullWidth:!0,size:"medium",variant:"contained",color:"primary","aria-label":"\u9009\u62e9\u4e00\u9879",onClick:function(){return function(){if(u){var a=v.find(function(e){return e.id===u}),t=Object(B.a)({},{user:"assesser",cow:"cow",cowshed:"cowshed"}[w],{label:a.label,value:u});e.saveReviewDetail(t),e.history.goBack()}}()}},r.a.createElement(we.a,null,"\u786e\u5b9a"))))}),Gn=t(886),Xn=t(887),Yn=t(888),Zn=t(889),$n=t(890),Qn=Object(xe.a)({root:{paddingTop:60},label:{fontSize:12,color:"#111"},flexbox:{display:"flex",justifyContent:"center",alignItems:"center"},paper:{marginTop:20},infoContent:{fontSize:14,padding:"10px 10px 10px 0"},input:{padding:"10px 0"},formControl:{marginTop:"20px!important"}}),er=[{label:"\u4e2a\u6027\u4ecb\u7ecd",icon:r.a.createElement(xa.a,{color:"primary"}),key:"userDesc"},{label:"\u516c\u53f8\u540d\u79f0",icon:r.a.createElement(Gn.a,{color:"primary"}),key:"companyName"},{label:"\u516c\u53f8\u5730\u5740",icon:r.a.createElement(Xn.a,{color:"primary"}),key:"companyAddress"},{label:"\u8054\u7cfb\u65b9\u5f0f",icon:r.a.createElement(Yn.a,{color:"primary"}),key:"mobileNumber"}],ar=function(e){var a=Object(n.useState)(!1),t=Object(P.a)(a,2),c=t[0],l=t[1],o=Qn(),s=Object(n.useState)({userDesc:"\u6e05\u98ce\u96e8\u9732\u4e00\u76f8\u9022\u4fbf\u80dc\u5374\u4eba\u95f4\u65e0\u6570",companyName:"UniDairy\u79d1\u6280\u6709\u9650\u516c\u53f8",companyAddress:"\u5317\u4eac\u5e02\u6d77\u6dc0\u533a\u67d0\u67d0\u8def",mobileNumber:"18888888888"}),m=Object(P.a)(s,2),u=m[0],p=m[1];return r.a.createElement(J.a,{className:o.root},r.a.createElement(Ga,{title:"\u4e2a\u4eba\u4fe1\u606f",endAdorment:r.a.createElement(X.a,{onClick:function(){return l(!c)},className:"text-white"},c?r.a.createElement(Zn.a,null):r.a.createElement($n.a,null))}),r.a.createElement(Ca.a,null,er.map(function(e){return c?r.a.createElement(K.a,{fullWidth:!0,margin:"dense",key:e.key,className:o.formControl},r.a.createElement(V.a,{htmlFor:e.key},e.label),r.a.createElement(q.a,{id:"input-with-icon-adornment",startAdornment:r.a.createElement(G.a,{position:"start"},e.icon),multiline:!0,className:o.formControl,value:u[e.key],onChange:(a=e.key,function(e){p(Object(i.a)({},u,Object(B.a)({},a,e.target.value)))})})):r.a.createElement(ia.a,{className:o.paper,key:e.key},r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0,xs:2,className:o.flexbox},r.a.createElement(X.a,null,e.icon)),r.a.createElement(Y.a,{item:!0,xs:!0},r.a.createElement(Ca.a,{className:o.label},e.label),r.a.createElement(Ca.a,{className:o.infoContent},u[e.key]))));var a})))},tr=t(375),nr=t.n(tr),rr=t(374),cr=t.n(rr),lr=t(892),or=t(893),ir=Object(A.a)(function(e){return{container:{marginTop:60,padding:"0 10px",overflowY:"auto",position:"relative",paddingBottom:30},listItem:{padding:"5px 0"},btnMargin:{marginTop:20},doneState:{position:"absolute",top:20,right:"10%"},donePhoto:{display:"block",width:"100%",height:"auto"}}}),sr=t(910);function mr(e){var a=e.keyWord,t=e.files;if(!t.length)return Object(sr.a)(a);var n={imgs:be,files:Ee},r=new FormData;return t.forEach(function(e){return r.append(a,e)}),n[a](r).pipe(Object(Le.a)("response"))}var ur=t(891),pr=t(362),dr=null,fr=function(e){var a=ir(),t=Object(o.d)(function(e){return e.TaskDetail2}),c=Object(n.useState)({done_date:null,done_status:!0,done_content:"",done_attachment:"",done_photos:""}),l=Object(P.a)(c,2),s=l[0],m=l[1],u=r.a.useState(!1),p=Object(P.a)(u,2),d=p[0],f=p[1],b=Object(n.useState)([]),E=Object(P.a)(b,2),g=E[0],h=E[1],v=Object(n.useState)([]),y=Object(P.a)(v,2),O=y[0],x=y[1],j=Object(n.useState)(!1),N=Object(P.a)(j,2),w=N[0],k=N[1],S=Object(o.c)(),_=function(){return k(!0)};return Object(n.useEffect)(function(){var a;if(d){var t=mr({files:g,keyWord:"imgs"}),n=mr({files:O,keyWord:"files"}),r=cr()(s);a=Object(ur.a)(t,n).pipe(Object(pr.a)(function(a){var t=function(e){return Ye()(Ge.a,Ve()(""),ta()(Je()(e),nr()(",")))},n=a.filter(function(e){return"object"===typeof e}),c=Object(P.a)(n,2),l=c[0],o=c[1];return r.done_photos=t("upload_imgs")(l),r.done_attachment=t("upload_files")(o),r.done_date=Ye()(Ge.a,Ve()(null),function(e){return e.toISODate()})(s.done_date),function(e){return fe("todotaskruns",e,{useToken:!0,useFarmCode:!0,useJSON:!0,useId:!0})}(Object(i.a)({},r,{id:e.match.params.id}))}),Object(Ma.a)(function(){return f(!1)})).subscribe(function(){S({type:"SAVE_TASK_DETAIL2",payload:Object(i.a)({done_status:!0,done_status_label:"\u5df2\u5b8c\u6210"},r)})},function(e){return console.error(e)})}return function(){a&&a.unsubscribe()}},[d,s,g,O,S,e.match.params.id]),Object(n.useEffect)(function(){w&&dr.show()},[w]),Object(n.useEffect)(function(){var e=document.getElementById("images");return dr=e&&new hn.a(e,{hidden:function(){k(function(){return!1})}}),function(){dr&&dr.destroy(),dr=null}},[]),r.a.createElement(Ca.a,{className:a.container},r.a.createElement(Ga,{title:"\u4efb\u52a1\u5355\u8be6\u60c5"}),r.a.createElement(wt,{done_state_label:t.done_status_label,done_state:t.done_status?1:2,className:a.doneState}),[{label:"\u4efb\u52a1\u540d\u79f0",prop:"todotask_name"},{label:"\u8d23\u4efb\u4eba",prop:"tasker_name"},{label:"\u5730\u70b9\u63cf\u8ff0",prop:"location"},{label:"\u4efb\u52a1\u63cf\u8ff0",prop:"content"},{label:"\u76ee\u6807",prop:"target"}].map(function(e){return r.a.createElement(Ca.a,{key:e.prop},r.a.createElement(Y.a,{container:!0,className:a.listItem},r.a.createElement(Y.a,{item:!0,xs:3},e.label,":"),r.a.createElement(Y.a,{item:!0,xs:9},t[e.prop]||"\u65e0")),r.a.createElement(dt.a,null))}),r.a.createElement(Y.a,{container:!0,className:a.listItem},r.a.createElement(Y.a,{item:!0,xs:3},"\u9644\u4ef6:"),r.a.createElement(Y.a,{item:!0,xs:9},t.attachment?r.a.createElement(Y.a,{container:!0,spacing:1},t.attachment.split(",").map(function(e,a){return r.a.createElement(Y.a,{item:!0,xs:4,key:"attachment-".concat(a)},r.a.createElement("a",{href:e,download:!0},r.a.createElement(X.a,{style:{padding:0}},r.a.createElement(nt.a,{color:"primary"}))))})):"\u65e0")),r.a.createElement(dt.a,null),t.done_status?[[{label:"\u5b8c\u5de5\u65e5\u671f",prop:"done_date"},{label:"\u5b8c\u5de5\u63cf\u8ff0",prop:"done_content"}].map(function(e){return r.a.createElement(Ca.a,{key:e.prop},r.a.createElement(Y.a,{container:!0,className:a.listItem},r.a.createElement(Y.a,{item:!0,xs:3},e.label,":"),r.a.createElement(Y.a,{item:!0,xs:9},t[e.prop]||"\u65e0")),r.a.createElement(dt.a,null))}),r.a.createElement(Y.a,{container:!0,className:a.listItem,key:"1"},r.a.createElement(Y.a,{item:!0,xs:3},"\u5b8c\u5de5\u9644\u4ef6:"),r.a.createElement(Y.a,{item:!0,xs:9},t.done_attachment?r.a.createElement(Y.a,{container:!0,spacing:1},t.done_attachment.split(",").map(function(e,a){return r.a.createElement(Y.a,{item:!0,xs:6,key:"done-attachment-".concat(a)},r.a.createElement("a",{href:e,download:!0},r.a.createElement(X.a,{style:{padding:0}},r.a.createElement(nt.a,{color:"primary"})),r.a.createElement("span",null,"\u9644\u4ef6",a+1)))})):"\u65e0")),r.a.createElement(dt.a,{key:"2"}),r.a.createElement(Y.a,{container:!0,className:a.listItem,key:"3"},r.a.createElement(Y.a,{item:!0,xs:3},"\u5b8c\u5de5\u7167\u7247:"),r.a.createElement(Y.a,{item:!0,xs:9},t.done_photos?r.a.createElement(Y.a,{container:!0,spacing:1,id:"images"},t.done_photos.split(",").map(function(e,t){return r.a.createElement(Y.a,{item:!0,xs:4,key:"done-photo-".concat(t),onClick:_},r.a.createElement("img",{src:e,className:a.donePhoto,alt:"\u5b8c\u5de5\u7167\u7247"}))})):"\u65e0"))]:[r.a.createElement(K.a,{fullWidth:!0,margin:"normal",key:"0"},r.a.createElement(Kt.b,{utils:Vt.a,locale:"zh-cn"},r.a.createElement(Kt.a,{id:"mui-pickers-date",label:"\u5b8c\u5de5\u65e5\u671f",format:"yyyy-MM-dd",value:s.done_date,onChange:function(e){m(Object(i.a)({},s,{done_date:e}))},okLabel:"\u786e\u5b9a",cancelLabel:"\u53d6\u6d88",clearable:!0,clearLabel:"\u6e05\u9664"}))),r.a.createElement(Ca.a,{style:{paddingBottom:"10px"},key:"1"},r.a.createElement(en,{labelText:"\u5b8c\u5de5\u63cf\u8ff0",photo:g,note:s.done_content,saveReviewDetail:function(e){"note"in e&&m(Object(i.a)({},s,{done_content:e.note})),"photo"in e&&h(e.photo)},textAreaRequired:!1,uploadImgRequired:!1})),r.a.createElement(dt.a,{key:"2"}),r.a.createElement(Ca.a,{style:{marginTop:"20px"},key:"3"},r.a.createElement(Zt.a,{onDrop:function(e){return x(e)}},function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",a(),r.a.createElement("input",t()),r.a.createElement(Y.a,{container:!0,spacing:1},r.a.createElement(Y.a,{item:!0},r.a.createElement("span",null,"\u4e0a\u4f20\u9644\u4ef6:")),r.a.createElement(Y.a,{item:!0},r.a.createElement(lr.a,{color:"primary"})))))})),r.a.createElement(Ca.a,{className:"mt-5",key:"4"},O.map(function(e){return r.a.createElement(Y.a,{container:!0,key:e.name,spacing:1},r.a.createElement(Y.a,{item:!0},r.a.createElement(or.a,{color:"primary"})),r.a.createElement(Y.a,{item:!0},e.name))})),O.length?r.a.createElement(dt.a,{key:"5"}):null,r.a.createElement(Se,{btnText:"\u5b8c\u5de5",onClick:function(){return f(!0)},loading:d,className:a.btnMargin,key:"6"})])},br=document.getElementById("root"),Er=Object(D.f)(function(e){return Object(n.useEffect)(function(){br.scrollTo(0,0)},[e.location.pathname]),e.children});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(786);var gr=t(894),hr=t(895),vr=t(896),yr=t(897),Or=t(899),xr=t(898),jr=t(909),Nr={success:gr.a,warning:hr.a,error:vr.a,info:yr.a},wr=Object(A.a)(function(e){return{success:{backgroundColor:xt.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:jt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function kr(e){var a=wr(),t=e.className,n=e.message,c=e.onClose,l=e.variant,o=Object(Qa.a)(e,["className","message","onClose","variant"]),i=Nr[l];return r.a.createElement(xr.a,Object.assign({className:Object(Ja.a)(a[l],t),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(i,{className:Object(Ja.a)(a.icon,a.iconVariant)}),n),action:[r.a.createElement(X.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(Or.a,{className:a.icon}))]},o))}var Sr=Object(A.a)(function(e){return{margin:{margin:e.spacing(1)}}});var _r=function(e){var a=Sr(),t=Object(o.d)(function(e){return e.Message}),n=t.open,c=t.variant,l=t.message,i=Object(o.c)();function s(e,a){"clickaway"!==a&&i(oe())}return r.a.createElement("div",null,r.a.createElement(jr.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,autoHideDuration:"error"===c?null:3e3,onClose:s},r.a.createElement(kr,{onClose:s,className:a.margin,variant:c,message:l})))},Cr=Object(T.a)({palette:{primary:{main:"#00c6a0",contrastText:"#fff"},secondary:{main:"#fff"}}});l.a.render(r.a.createElement(o.a,{store:_},r.a.createElement(C.a,{theme:Cr},r.a.createElement(function(){return r.a.createElement(I.a,null,r.a.createElement(Er,null,r.a.createElement(D.b,{path:"/login",component:Re}),r.a.createElement(D.b,{path:"/register",component:Be}),r.a.createElement(D.b,{path:"/selectRanch",component:Ea}),r.a.createElement(D.b,{path:["/","/home","/index"],exact:!0,component:U(Fa)}),r.a.createElement(D.b,{path:"/manageList/:type",component:Ht}),r.a.createElement(D.b,{path:"/sceneReport",component:wn}),r.a.createElement(D.b,{path:"/SceneReportDetail",component:Pn}),r.a.createElement(D.b,{path:"/tasks",component:U(pt)}),r.a.createElement(D.b,{path:"/reports",component:U(At)}),r.a.createElement(D.b,{path:"/search",component:U(_n)}),r.a.createElement(D.b,{path:"/cowDetail/:id",component:U(Hn)}),r.a.createElement(D.b,{path:"/reviewDetail/:ranchType/:reviewType",component:vn}),r.a.createElement(D.b,{path:"/viewCowshed/:ranchType",component:jn}),r.a.createElement(D.b,{path:"/tasksDetail",component:Tt}),r.a.createElement(D.b,{path:"/tasksDetail2/:id",component:fr}),r.a.createElement(D.b,{path:"/user",component:ar}),r.a.createElement(D.b,{path:"/commonSelectList/:type",component:qn})))},null),r.a.createElement(_r,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[390,1,2]]]);
//# sourceMappingURL=main.9fb1feec.chunk.js.map